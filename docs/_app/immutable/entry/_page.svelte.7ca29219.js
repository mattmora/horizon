import{J as ae,S as Ft,i as Ct,s as bt,C as _s,k as F,q as b,a as K,l as C,m as R,r as P,h as w,c as j,n as D,b as fe,G as i,u as ue,D as gs,E as vs,F as Es,g as Ne,d as Ue,K as Gt,H as Mt,I as it,p as rs,L as un,M as $e,N as cn,y as gt,z as vt,A as Et,B as Tt,e as rn,O as Tn,P as Ts,v as Vt,f as qt,Q as jt,R as As,T as Ns,U as $n,w as is,V as os,W as as,X as Bn,o as Os}from"../chunks/index.b9468fb8.js";import{w as At}from"../chunks/index.27d7024d.js";var Is=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,fn=Math.ceil,rt=Math.floor,Ye="[BigNumber Error] ",Dn=Ye+"Number primitive has more than 15 significant digits: ",xe=1e14,oe=14,pn=9007199254740991,hn=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],dt=1e7,ye=1e9;function us(e){var t,a,s,o=S.prototype={constructor:S,toString:null,valueOf:null},_=new S(1),g=20,p=4,u=-7,d=21,v=-1e7,k=1e7,B=!1,h=1,A=0,M={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:"Â ",suffix:""},L="0123456789abcdefghijklmnopqrstuvwxyz",$=!0;function S(n,r){var l,T,f,m,I,c,E,O,N=this;if(!(N instanceof S))return new S(n,r);if(r==null){if(n&&n._isBigNumber===!0){N.s=n.s,!n.c||n.e>k?N.c=N.e=null:n.e<v?N.c=[N.e=0]:(N.e=n.e,N.c=n.c.slice());return}if((c=typeof n=="number")&&n*0==0){if(N.s=1/n<0?(n=-n,-1):1,n===~~n){for(m=0,I=n;I>=10;I/=10,m++);m>k?N.c=N.e=null:(N.e=m,N.c=[n]);return}O=String(n)}else{if(!Is.test(O=String(n)))return s(N,O,c);N.s=O.charCodeAt(0)==45?(O=O.slice(1),-1):1}(m=O.indexOf("."))>-1&&(O=O.replace(".","")),(I=O.search(/e/i))>0?(m<0&&(m=I),m+=+O.slice(I+1),O=O.substring(0,I)):m<0&&(m=O.length)}else{if(Me(r,2,L.length,"Base"),r==10&&$)return N=new S(n),W(N,g+N.e+1,p);if(O=String(n),c=typeof n=="number"){if(n*0!=0)return s(N,O,c,r);if(N.s=1/n<0?(O=O.slice(1),-1):1,S.DEBUG&&O.replace(/^0\.0*|\./,"").length>15)throw Error(Dn+n)}else N.s=O.charCodeAt(0)===45?(O=O.slice(1),-1):1;for(l=L.slice(0,r),m=I=0,E=O.length;I<E;I++)if(l.indexOf(T=O.charAt(I))<0){if(T=="."){if(I>m){m=E;continue}}else if(!f&&(O==O.toUpperCase()&&(O=O.toLowerCase())||O==O.toLowerCase()&&(O=O.toUpperCase()))){f=!0,I=-1,m=0;continue}return s(N,String(n),c,r)}c=!1,O=a(O,r,10,N.s),(m=O.indexOf("."))>-1?O=O.replace(".",""):m=O.length}for(I=0;O.charCodeAt(I)===48;I++);for(E=O.length;O.charCodeAt(--E)===48;);if(O=O.slice(I,++E)){if(E-=I,c&&S.DEBUG&&E>15&&(n>pn||n!==rt(n)))throw Error(Dn+N.s*n);if((m=m-I-1)>k)N.c=N.e=null;else if(m<v)N.c=[N.e=0];else{if(N.e=m,N.c=[],I=(m+1)%oe,m<0&&(I+=oe),I<E){for(I&&N.c.push(+O.slice(0,I)),E-=oe;I<E;)N.c.push(+O.slice(I,I+=oe));I=oe-(O=O.slice(I)).length}else I-=E;for(;I--;O+="0");N.c.push(+O)}}else N.c=[N.e=0]}S.clone=us,S.ROUND_UP=0,S.ROUND_DOWN=1,S.ROUND_CEIL=2,S.ROUND_FLOOR=3,S.ROUND_HALF_UP=4,S.ROUND_HALF_DOWN=5,S.ROUND_HALF_EVEN=6,S.ROUND_HALF_CEIL=7,S.ROUND_HALF_FLOOR=8,S.EUCLID=9,S.config=S.set=function(n){var r,l;if(n!=null)if(typeof n=="object"){if(n.hasOwnProperty(r="DECIMAL_PLACES")&&(l=n[r],Me(l,0,ye,r),g=l),n.hasOwnProperty(r="ROUNDING_MODE")&&(l=n[r],Me(l,0,8,r),p=l),n.hasOwnProperty(r="EXPONENTIAL_AT")&&(l=n[r],l&&l.pop?(Me(l[0],-ye,0,r),Me(l[1],0,ye,r),u=l[0],d=l[1]):(Me(l,-ye,ye,r),u=-(d=l<0?-l:l))),n.hasOwnProperty(r="RANGE"))if(l=n[r],l&&l.pop)Me(l[0],-ye,-1,r),Me(l[1],1,ye,r),v=l[0],k=l[1];else if(Me(l,-ye,ye,r),l)v=-(k=l<0?-l:l);else throw Error(Ye+r+" cannot be zero: "+l);if(n.hasOwnProperty(r="CRYPTO"))if(l=n[r],l===!!l)if(l)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))B=l;else throw B=!l,Error(Ye+"crypto unavailable");else B=l;else throw Error(Ye+r+" not true or false: "+l);if(n.hasOwnProperty(r="MODULO_MODE")&&(l=n[r],Me(l,0,9,r),h=l),n.hasOwnProperty(r="POW_PRECISION")&&(l=n[r],Me(l,0,ye,r),A=l),n.hasOwnProperty(r="FORMAT"))if(l=n[r],typeof l=="object")M=l;else throw Error(Ye+r+" not an object: "+l);if(n.hasOwnProperty(r="ALPHABET"))if(l=n[r],typeof l=="string"&&!/^.?$|[+\-.\s]|(.).*\1/.test(l))$=l.slice(0,10)=="0123456789",L=l;else throw Error(Ye+r+" invalid: "+l)}else throw Error(Ye+"Object expected: "+n);return{DECIMAL_PLACES:g,ROUNDING_MODE:p,EXPONENTIAL_AT:[u,d],RANGE:[v,k],CRYPTO:B,MODULO_MODE:h,POW_PRECISION:A,FORMAT:M,ALPHABET:L}},S.isBigNumber=function(n){if(!n||n._isBigNumber!==!0)return!1;if(!S.DEBUG)return!0;var r,l,T=n.c,f=n.e,m=n.s;e:if({}.toString.call(T)=="[object Array]"){if((m===1||m===-1)&&f>=-ye&&f<=ye&&f===rt(f)){if(T[0]===0){if(f===0&&T.length===1)return!0;break e}if(r=(f+1)%oe,r<1&&(r+=oe),String(T[0]).length==r){for(r=0;r<T.length;r++)if(l=T[r],l<0||l>=xe||l!==rt(l))break e;if(l!==0)return!0}}}else if(T===null&&f===null&&(m===null||m===1||m===-1))return!0;throw Error(Ye+"Invalid BigNumber: "+n)},S.maximum=S.max=function(){return q(arguments,o.lt)},S.minimum=S.min=function(){return q(arguments,o.gt)},S.random=function(){var n=9007199254740992,r=Math.random()*n&2097151?function(){return rt(Math.random()*n)}:function(){return(Math.random()*1073741824|0)*8388608+(Math.random()*8388608|0)};return function(l){var T,f,m,I,c,E=0,O=[],N=new S(_);if(l==null?l=g:Me(l,0,ye),I=fn(l/oe),B)if(crypto.getRandomValues){for(T=crypto.getRandomValues(new Uint32Array(I*=2));E<I;)c=T[E]*131072+(T[E+1]>>>11),c>=9e15?(f=crypto.getRandomValues(new Uint32Array(2)),T[E]=f[0],T[E+1]=f[1]):(O.push(c%1e14),E+=2);E=I/2}else if(crypto.randomBytes){for(T=crypto.randomBytes(I*=7);E<I;)c=(T[E]&31)*281474976710656+T[E+1]*1099511627776+T[E+2]*4294967296+T[E+3]*16777216+(T[E+4]<<16)+(T[E+5]<<8)+T[E+6],c>=9e15?crypto.randomBytes(7).copy(T,E):(O.push(c%1e14),E+=7);E=I/7}else throw B=!1,Error(Ye+"crypto unavailable");if(!B)for(;E<I;)c=r(),c<9e15&&(O[E++]=c%1e14);for(I=O[--E],l%=oe,I&&l&&(c=hn[oe-l],O[E]=rt(I/c)*c);O[E]===0;O.pop(),E--);if(E<0)O=[m=0];else{for(m=-1;O[0]===0;O.splice(0,1),m-=oe);for(E=1,c=O[0];c>=10;c/=10,E++);E<oe&&(m-=oe-E)}return N.e=m,N.c=O,N}}(),S.sum=function(){for(var n=1,r=arguments,l=new S(r[0]);n<r.length;)l=l.plus(r[n++]);return l},a=function(){var n="0123456789";function r(l,T,f,m){for(var I,c=[0],E,O=0,N=l.length;O<N;){for(E=c.length;E--;c[E]*=T);for(c[0]+=m.indexOf(l.charAt(O++)),I=0;I<c.length;I++)c[I]>f-1&&(c[I+1]==null&&(c[I+1]=0),c[I+1]+=c[I]/f|0,c[I]%=f)}return c.reverse()}return function(l,T,f,m,I){var c,E,O,N,U,G,y,V,X=l.indexOf("."),ne=g,Z=p;for(X>=0&&(N=A,A=0,l=l.replace(".",""),V=new S(T),G=V.pow(l.length-X),A=N,V.c=r(ut(Ke(G.c),G.e,"0"),10,f,n),V.e=V.c.length),y=r(l,T,f,I?(c=L,n):(c=n,L)),O=N=y.length;y[--N]==0;y.pop());if(!y[0])return c.charAt(0);if(X<0?--O:(G.c=y,G.e=O,G.s=m,G=t(G,V,ne,Z,f),y=G.c,U=G.r,O=G.e),E=O+ne+1,X=y[E],N=f/2,U=U||E<0||y[E+1]!=null,U=Z<4?(X!=null||U)&&(Z==0||Z==(G.s<0?3:2)):X>N||X==N&&(Z==4||U||Z==6&&y[E-1]&1||Z==(G.s<0?8:7)),E<1||!y[0])l=U?ut(c.charAt(1),-ne,c.charAt(0)):c.charAt(0);else{if(y.length=E,U)for(--f;++y[--E]>f;)y[E]=0,E||(++O,y=[1].concat(y));for(N=y.length;!y[--N];);for(X=0,l="";X<=N;l+=c.charAt(y[X++]));l=ut(l,O,c.charAt(0))}return l}}(),t=function(){function n(T,f,m){var I,c,E,O,N=0,U=T.length,G=f%dt,y=f/dt|0;for(T=T.slice();U--;)E=T[U]%dt,O=T[U]/dt|0,I=y*E+O*G,c=G*E+I%dt*dt+N,N=(c/m|0)+(I/dt|0)+y*O,T[U]=c%m;return N&&(T=[N].concat(T)),T}function r(T,f,m,I){var c,E;if(m!=I)E=m>I?1:-1;else for(c=E=0;c<m;c++)if(T[c]!=f[c]){E=T[c]>f[c]?1:-1;break}return E}function l(T,f,m,I){for(var c=0;m--;)T[m]-=c,c=T[m]<f[m]?1:0,T[m]=c*I+T[m]-f[m];for(;!T[0]&&T.length>1;T.splice(0,1));}return function(T,f,m,I,c){var E,O,N,U,G,y,V,X,ne,Z,se,me,Ie,we,Ae,he,Ee,Oe=T.s==f.s?1:-1,ge=T.c,_e=f.c;if(!ge||!ge[0]||!_e||!_e[0])return new S(!T.s||!f.s||(ge?_e&&ge[0]==_e[0]:!_e)?NaN:ge&&ge[0]==0||!_e?Oe*0:Oe/0);for(X=new S(Oe),ne=X.c=[],O=T.e-f.e,Oe=m+O+1,c||(c=xe,O=je(T.e/oe)-je(f.e/oe),Oe=Oe/oe|0),N=0;_e[N]==(ge[N]||0);N++);if(_e[N]>(ge[N]||0)&&O--,Oe<0)ne.push(1),U=!0;else{for(we=ge.length,he=_e.length,N=0,Oe+=2,G=rt(c/(_e[0]+1)),G>1&&(_e=n(_e,G,c),ge=n(ge,G,c),he=_e.length,we=ge.length),Ie=he,Z=ge.slice(0,he),se=Z.length;se<he;Z[se++]=0);Ee=_e.slice(),Ee=[0].concat(Ee),Ae=_e[0],_e[1]>=c/2&&Ae++;do{if(G=0,E=r(_e,Z,he,se),E<0){if(me=Z[0],he!=se&&(me=me*c+(Z[1]||0)),G=rt(me/Ae),G>1)for(G>=c&&(G=c-1),y=n(_e,G,c),V=y.length,se=Z.length;r(y,Z,V,se)==1;)G--,l(y,he<V?Ee:_e,V,c),V=y.length,E=1;else G==0&&(E=G=1),y=_e.slice(),V=y.length;if(V<se&&(y=[0].concat(y)),l(Z,y,se,c),se=Z.length,E==-1)for(;r(_e,Z,he,se)<1;)G++,l(Z,he<se?Ee:_e,se,c),se=Z.length}else E===0&&(G++,Z=[0]);ne[N++]=G,Z[0]?Z[se++]=ge[Ie]||0:(Z=[ge[Ie]],se=1)}while((Ie++<we||Z[0]!=null)&&Oe--);U=Z[0]!=null,ne[0]||ne.splice(0,1)}if(c==xe){for(N=1,Oe=ne[0];Oe>=10;Oe/=10,N++);W(X,m+(X.e=N+O*oe-1)+1,I,U)}else X.e=O,X.r=+U;return X}}();function z(n,r,l,T){var f,m,I,c,E;if(l==null?l=p:Me(l,0,8),!n.c)return n.toString();if(f=n.c[0],I=n.e,r==null)E=Ke(n.c),E=T==1||T==2&&(I<=u||I>=d)?sn(E,I):ut(E,I,"0");else if(n=W(new S(n),r,l),m=n.e,E=Ke(n.c),c=E.length,T==1||T==2&&(r<=m||m<=u)){for(;c<r;E+="0",c++);E=sn(E,m)}else if(r-=I,E=ut(E,m,"0"),m+1>c){if(--r>0)for(E+=".";r--;E+="0");}else if(r+=m-c,r>0)for(m+1==c&&(E+=".");r--;E+="0");return n.s<0&&f?"-"+E:E}function q(n,r){for(var l,T=1,f=new S(n[0]);T<n.length;T++)if(l=new S(n[T]),l.s)r.call(f,l)&&(f=l);else{f=l;break}return f}function Q(n,r,l){for(var T=1,f=r.length;!r[--f];r.pop());for(f=r[0];f>=10;f/=10,T++);return(l=T+l*oe-1)>k?n.c=n.e=null:l<v?n.c=[n.e=0]:(n.e=l,n.c=r),n}s=function(){var n=/^(-?)0([xbo])(?=\w[\w.]*$)/i,r=/^([^.]+)\.$/,l=/^\.([^.]+)$/,T=/^-?(Infinity|NaN)$/,f=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(m,I,c,E){var O,N=c?I:I.replace(f,"");if(T.test(N))m.s=isNaN(N)?null:N<0?-1:1;else{if(!c&&(N=N.replace(n,function(U,G,y){return O=(y=y.toLowerCase())=="x"?16:y=="b"?2:8,!E||E==O?G:U}),E&&(O=E,N=N.replace(r,"$1").replace(l,"0.$1")),I!=N))return new S(N,O);if(S.DEBUG)throw Error(Ye+"Not a"+(E?" base "+E:"")+" number: "+I);m.s=null}m.c=m.e=null}}();function W(n,r,l,T){var f,m,I,c,E,O,N,U=n.c,G=hn;if(U){e:{for(f=1,c=U[0];c>=10;c/=10,f++);if(m=r-f,m<0)m+=oe,I=r,E=U[O=0],N=E/G[f-I-1]%10|0;else if(O=fn((m+1)/oe),O>=U.length)if(T){for(;U.length<=O;U.push(0));E=N=0,f=1,m%=oe,I=m-oe+1}else break e;else{for(E=c=U[O],f=1;c>=10;c/=10,f++);m%=oe,I=m-oe+f,N=I<0?0:E/G[f-I-1]%10|0}if(T=T||r<0||U[O+1]!=null||(I<0?E:E%G[f-I-1]),T=l<4?(N||T)&&(l==0||l==(n.s<0?3:2)):N>5||N==5&&(l==4||T||l==6&&(m>0?I>0?E/G[f-I]:0:U[O-1])%10&1||l==(n.s<0?8:7)),r<1||!U[0])return U.length=0,T?(r-=n.e+1,U[0]=G[(oe-r%oe)%oe],n.e=-r||0):U[0]=n.e=0,n;if(m==0?(U.length=O,c=1,O--):(U.length=O+1,c=G[oe-m],U[O]=I>0?rt(E/G[f-I]%G[I])*c:0),T)for(;;)if(O==0){for(m=1,I=U[0];I>=10;I/=10,m++);for(I=U[0]+=c,c=1;I>=10;I/=10,c++);m!=c&&(n.e++,U[0]==xe&&(U[0]=1));break}else{if(U[O]+=c,U[O]!=xe)break;U[O--]=0,c=1}for(m=U.length;U[--m]===0;U.pop());}n.e>k?n.c=n.e=null:n.e<v&&(n.c=[n.e=0])}return n}function Y(n){var r,l=n.e;return l===null?n.toString():(r=Ke(n.c),r=l<=u||l>=d?sn(r,l):ut(r,l,"0"),n.s<0?"-"+r:r)}return o.absoluteValue=o.abs=function(){var n=new S(this);return n.s<0&&(n.s=1),n},o.comparedTo=function(n,r){return Lt(this,new S(n,r))},o.decimalPlaces=o.dp=function(n,r){var l,T,f,m=this;if(n!=null)return Me(n,0,ye),r==null?r=p:Me(r,0,8),W(new S(m),n+m.e+1,r);if(!(l=m.c))return null;if(T=((f=l.length-1)-je(this.e/oe))*oe,f=l[f])for(;f%10==0;f/=10,T--);return T<0&&(T=0),T},o.dividedBy=o.div=function(n,r){return t(this,new S(n,r),g,p)},o.dividedToIntegerBy=o.idiv=function(n,r){return t(this,new S(n,r),0,1)},o.exponentiatedBy=o.pow=function(n,r){var l,T,f,m,I,c,E,O,N,U=this;if(n=new S(n),n.c&&!n.isInteger())throw Error(Ye+"Exponent not an integer: "+Y(n));if(r!=null&&(r=new S(r)),c=n.e>14,!U.c||!U.c[0]||U.c[0]==1&&!U.e&&U.c.length==1||!n.c||!n.c[0])return N=new S(Math.pow(+Y(U),c?n.s*(2-nn(n)):+Y(n))),r?N.mod(r):N;if(E=n.s<0,r){if(r.c?!r.c[0]:!r.s)return new S(NaN);T=!E&&U.isInteger()&&r.isInteger(),T&&(U=U.mod(r))}else{if(n.e>9&&(U.e>0||U.e<-1||(U.e==0?U.c[0]>1||c&&U.c[1]>=24e7:U.c[0]<8e13||c&&U.c[0]<=9999975e7)))return m=U.s<0&&nn(n)?-0:0,U.e>-1&&(m=1/m),new S(E?1/m:m);A&&(m=fn(A/oe+2))}for(c?(l=new S(.5),E&&(n.s=1),O=nn(n)):(f=Math.abs(+Y(n)),O=f%2),N=new S(_);;){if(O){if(N=N.times(U),!N.c)break;m?N.c.length>m&&(N.c.length=m):T&&(N=N.mod(r))}if(f){if(f=rt(f/2),f===0)break;O=f%2}else if(n=n.times(l),W(n,n.e+1,1),n.e>14)O=nn(n);else{if(f=+Y(n),f===0)break;O=f%2}U=U.times(U),m?U.c&&U.c.length>m&&(U.c.length=m):T&&(U=U.mod(r))}return T?N:(E&&(N=_.div(N)),r?N.mod(r):m?W(N,A,p,I):N)},o.integerValue=function(n){var r=new S(this);return n==null?n=p:Me(n,0,8),W(r,r.e+1,n)},o.isEqualTo=o.eq=function(n,r){return Lt(this,new S(n,r))===0},o.isFinite=function(){return!!this.c},o.isGreaterThan=o.gt=function(n,r){return Lt(this,new S(n,r))>0},o.isGreaterThanOrEqualTo=o.gte=function(n,r){return(r=Lt(this,new S(n,r)))===1||r===0},o.isInteger=function(){return!!this.c&&je(this.e/oe)>this.c.length-2},o.isLessThan=o.lt=function(n,r){return Lt(this,new S(n,r))<0},o.isLessThanOrEqualTo=o.lte=function(n,r){return(r=Lt(this,new S(n,r)))===-1||r===0},o.isNaN=function(){return!this.s},o.isNegative=function(){return this.s<0},o.isPositive=function(){return this.s>0},o.isZero=function(){return!!this.c&&this.c[0]==0},o.minus=function(n,r){var l,T,f,m,I=this,c=I.s;if(n=new S(n,r),r=n.s,!c||!r)return new S(NaN);if(c!=r)return n.s=-r,I.plus(n);var E=I.e/oe,O=n.e/oe,N=I.c,U=n.c;if(!E||!O){if(!N||!U)return N?(n.s=-r,n):new S(U?I:NaN);if(!N[0]||!U[0])return U[0]?(n.s=-r,n):new S(N[0]?I:p==3?-0:0)}if(E=je(E),O=je(O),N=N.slice(),c=E-O){for((m=c<0)?(c=-c,f=N):(O=E,f=U),f.reverse(),r=c;r--;f.push(0));f.reverse()}else for(T=(m=(c=N.length)<(r=U.length))?c:r,c=r=0;r<T;r++)if(N[r]!=U[r]){m=N[r]<U[r];break}if(m&&(f=N,N=U,U=f,n.s=-n.s),r=(T=U.length)-(l=N.length),r>0)for(;r--;N[l++]=0);for(r=xe-1;T>c;){if(N[--T]<U[T]){for(l=T;l&&!N[--l];N[l]=r);--N[l],N[T]+=xe}N[T]-=U[T]}for(;N[0]==0;N.splice(0,1),--O);return N[0]?Q(n,N,O):(n.s=p==3?-1:1,n.c=[n.e=0],n)},o.modulo=o.mod=function(n,r){var l,T,f=this;return n=new S(n,r),!f.c||!n.s||n.c&&!n.c[0]?new S(NaN):!n.c||f.c&&!f.c[0]?new S(f):(h==9?(T=n.s,n.s=1,l=t(f,n,0,3),n.s=T,l.s*=T):l=t(f,n,0,h),n=f.minus(l.times(n)),!n.c[0]&&h==1&&(n.s=f.s),n)},o.multipliedBy=o.times=function(n,r){var l,T,f,m,I,c,E,O,N,U,G,y,V,X,ne,Z=this,se=Z.c,me=(n=new S(n,r)).c;if(!se||!me||!se[0]||!me[0])return!Z.s||!n.s||se&&!se[0]&&!me||me&&!me[0]&&!se?n.c=n.e=n.s=null:(n.s*=Z.s,!se||!me?n.c=n.e=null:(n.c=[0],n.e=0)),n;for(T=je(Z.e/oe)+je(n.e/oe),n.s*=Z.s,E=se.length,U=me.length,E<U&&(V=se,se=me,me=V,f=E,E=U,U=f),f=E+U,V=[];f--;V.push(0));for(X=xe,ne=dt,f=U;--f>=0;){for(l=0,G=me[f]%ne,y=me[f]/ne|0,I=E,m=f+I;m>f;)O=se[--I]%ne,N=se[I]/ne|0,c=y*O+N*G,O=G*O+c%ne*ne+V[m]+l,l=(O/X|0)+(c/ne|0)+y*N,V[m--]=O%X;V[m]=l}return l?++T:V.splice(0,1),Q(n,V,T)},o.negated=function(){var n=new S(this);return n.s=-n.s||null,n},o.plus=function(n,r){var l,T=this,f=T.s;if(n=new S(n,r),r=n.s,!f||!r)return new S(NaN);if(f!=r)return n.s=-r,T.minus(n);var m=T.e/oe,I=n.e/oe,c=T.c,E=n.c;if(!m||!I){if(!c||!E)return new S(f/0);if(!c[0]||!E[0])return E[0]?n:new S(c[0]?T:f*0)}if(m=je(m),I=je(I),c=c.slice(),f=m-I){for(f>0?(I=m,l=E):(f=-f,l=c),l.reverse();f--;l.push(0));l.reverse()}for(f=c.length,r=E.length,f-r<0&&(l=E,E=c,c=l,r=f),f=0;r;)f=(c[--r]=c[r]+E[r]+f)/xe|0,c[r]=xe===c[r]?0:c[r]%xe;return f&&(c=[f].concat(c),++I),Q(n,c,I)},o.precision=o.sd=function(n,r){var l,T,f,m=this;if(n!=null&&n!==!!n)return Me(n,1,ye),r==null?r=p:Me(r,0,8),W(new S(m),n,r);if(!(l=m.c))return null;if(f=l.length-1,T=f*oe+1,f=l[f]){for(;f%10==0;f/=10,T--);for(f=l[0];f>=10;f/=10,T++);}return n&&m.e+1>T&&(T=m.e+1),T},o.shiftedBy=function(n){return Me(n,-pn,pn),this.times("1e"+n)},o.squareRoot=o.sqrt=function(){var n,r,l,T,f,m=this,I=m.c,c=m.s,E=m.e,O=g+4,N=new S("0.5");if(c!==1||!I||!I[0])return new S(!c||c<0&&(!I||I[0])?NaN:I?m:1/0);if(c=Math.sqrt(+Y(m)),c==0||c==1/0?(r=Ke(I),(r.length+E)%2==0&&(r+="0"),c=Math.sqrt(+r),E=je((E+1)/2)-(E<0||E%2),c==1/0?r="5e"+E:(r=c.toExponential(),r=r.slice(0,r.indexOf("e")+1)+E),l=new S(r)):l=new S(c+""),l.c[0]){for(E=l.e,c=E+O,c<3&&(c=0);;)if(f=l,l=N.times(f.plus(t(m,f,O,1))),Ke(f.c).slice(0,c)===(r=Ke(l.c)).slice(0,c))if(l.e<E&&--c,r=r.slice(c-3,c+1),r=="9999"||!T&&r=="4999"){if(!T&&(W(f,f.e+g+2,0),f.times(f).eq(m))){l=f;break}O+=4,c+=4,T=1}else{(!+r||!+r.slice(1)&&r.charAt(0)=="5")&&(W(l,l.e+g+2,1),n=!l.times(l).eq(m));break}}return W(l,l.e+g+1,p,n)},o.toExponential=function(n,r){return n!=null&&(Me(n,0,ye),n++),z(this,n,r,1)},o.toFixed=function(n,r){return n!=null&&(Me(n,0,ye),n=n+this.e+1),z(this,n,r)},o.toFormat=function(n,r,l){var T,f=this;if(l==null)n!=null&&r&&typeof r=="object"?(l=r,r=null):n&&typeof n=="object"?(l=n,n=r=null):l=M;else if(typeof l!="object")throw Error(Ye+"Argument not an object: "+l);if(T=f.toFixed(n,r),f.c){var m,I=T.split("."),c=+l.groupSize,E=+l.secondaryGroupSize,O=l.groupSeparator||"",N=I[0],U=I[1],G=f.s<0,y=G?N.slice(1):N,V=y.length;if(E&&(m=c,c=E,E=m,V-=m),c>0&&V>0){for(m=V%c||c,N=y.substr(0,m);m<V;m+=c)N+=O+y.substr(m,c);E>0&&(N+=O+y.slice(m)),G&&(N="-"+N)}T=U?N+(l.decimalSeparator||"")+((E=+l.fractionGroupSize)?U.replace(new RegExp("\\d{"+E+"}\\B","g"),"$&"+(l.fractionGroupSeparator||"")):U):N}return(l.prefix||"")+T+(l.suffix||"")},o.toFraction=function(n){var r,l,T,f,m,I,c,E,O,N,U,G,y=this,V=y.c;if(n!=null&&(c=new S(n),!c.isInteger()&&(c.c||c.s!==1)||c.lt(_)))throw Error(Ye+"Argument "+(c.isInteger()?"out of range: ":"not an integer: ")+Y(c));if(!V)return new S(y);for(r=new S(_),O=l=new S(_),T=E=new S(_),G=Ke(V),m=r.e=G.length-y.e-1,r.c[0]=hn[(I=m%oe)<0?oe+I:I],n=!n||c.comparedTo(r)>0?m>0?r:O:c,I=k,k=1/0,c=new S(G),E.c[0]=0;N=t(c,r,0,1),f=l.plus(N.times(T)),f.comparedTo(n)!=1;)l=T,T=f,O=E.plus(N.times(f=O)),E=f,r=c.minus(N.times(f=r)),c=f;return f=t(n.minus(l),T,0,1),E=E.plus(f.times(O)),l=l.plus(f.times(T)),E.s=O.s=y.s,m=m*2,U=t(O,T,m,p).minus(y).abs().comparedTo(t(E,l,m,p).minus(y).abs())<1?[O,T]:[E,l],k=I,U},o.toNumber=function(){return+Y(this)},o.toPrecision=function(n,r){return n!=null&&Me(n,1,ye),z(this,n,r,2)},o.toString=function(n){var r,l=this,T=l.s,f=l.e;return f===null?T?(r="Infinity",T<0&&(r="-"+r)):r="NaN":(n==null?r=f<=u||f>=d?sn(Ke(l.c),f):ut(Ke(l.c),f,"0"):n===10&&$?(l=W(new S(l),g+f+1,p),r=ut(Ke(l.c),l.e,"0")):(Me(n,2,L.length,"Base"),r=a(ut(Ke(l.c),f,"0"),10,n,T,!0)),T<0&&l.c[0]&&(r="-"+r)),r},o.valueOf=o.toJSON=function(){return Y(this)},o._isBigNumber=!0,o[Symbol.toStringTag]="BigNumber",o[Symbol.for("nodejs.util.inspect.custom")]=o.valueOf,e!=null&&S.set(e),S}function je(e){var t=e|0;return e>0||e===t?t:t-1}function Ke(e){for(var t,a,s=1,o=e.length,_=e[0]+"";s<o;){for(t=e[s++]+"",a=oe-t.length;a--;t="0"+t);_+=t}for(o=_.length;_.charCodeAt(--o)===48;);return _.slice(0,o+1||1)}function Lt(e,t){var a,s,o=e.c,_=t.c,g=e.s,p=t.s,u=e.e,d=t.e;if(!g||!p)return null;if(a=o&&!o[0],s=_&&!_[0],a||s)return a?s?0:-p:g;if(g!=p)return g;if(a=g<0,s=u==d,!o||!_)return s?0:!o^a?1:-1;if(!s)return u>d^a?1:-1;for(p=(u=o.length)<(d=_.length)?u:d,g=0;g<p;g++)if(o[g]!=_[g])return o[g]>_[g]^a?1:-1;return u==d?0:u>d^a?1:-1}function Me(e,t,a,s){if(e<t||e>a||e!==rt(e))throw Error(Ye+(s||"Argument")+(typeof e=="number"?e<t||e>a?" out of range: ":" not an integer: ":" not a primitive number: ")+String(e))}function nn(e){var t=e.c.length-1;return je(e.e/oe)==t&&e.c[t]%2!=0}function sn(e,t){return(e.length>1?e.charAt(0)+"."+e.slice(1):e)+(t<0?"e":"e+")+t}function ut(e,t,a){var s,o;if(t<0){for(o=a+".";++t;o+=a);e=o+e}else if(s=e.length,++t>s){for(o=a,t-=s;--t;o+=a);e+=o}else t<s&&(e=e.slice(0,t)+"."+e.slice(t));return e}var pe=us();const ws=pe(1);pe(60);pe(3600);pe(86400);pe(315581495e-1);const An=ws,Ss=100;pe.config({DECIMAL_PLACES:Ss});const dn=1,mn=1e5,De=pe(0),mt=pe(1),on=pe(299792458),ln=on.pow(2);var _t=Kt;function Kt(e){let t=e;var a={}.toString.call(e).slice(8,-1);if(a=="Set")return new Set([...e].map(o=>Kt(o)));if(a=="Map")return new Map([...e].map(o=>[Kt(o[0]),Kt(o[1])]));if(a=="Date")return new Date(e.getTime());if(a=="RegExp")return RegExp(e.source,ks(e));if(a=="Array"||a=="Object"){t=Array.isArray(e)?[]:{};for(var s in e)t[s]=Kt(e[s])}return t}function ks(e){if(typeof e.source.flags=="string")return e.source.flags;var t=[];return e.global&&t.push("g"),e.ignoreCase&&t.push("i"),e.multiline&&t.push("m"),e.sticky&&t.push("y"),e.unicode&&t.push("u"),t.join("")}const H={COMBUSTION:"combustion",FUSION:"fusion",ANTIMATTER:"antimatter"},Je={material:pe(1e6),fuel:pe(1e6),capture:{count:De,step:2,mass:pe(.5),area:De,rate:pe("1.4e-12"),automation:{mode:"off",interval:1,timer:0}},engines:{[H.COMBUSTION]:{count:pe(10),mass:pe(500),output:pe("140000000"),consumption:pe(30),loss:.75,throttle:0,thrust:De,automation:{mode:"off",interval:1,timer:0}},[H.FUSION]:{count:pe(0),mass:pe(8e3),output:pe("640000000000000"),consumption:pe(10),loss:.75,throttle:0,thrust:De,automation:{mode:"off",interval:1,timer:0}},[H.ANTIMATTER]:{count:pe(0),mass:pe(5e4),output:ln,consumption:pe(1),loss:.75,throttle:0,thrust:De,automation:{mode:"off",interval:1,timer:0}}},velocity:De,distance:De},Ms=()=>{const e=At(_t(Je)),{subscribe:t,set:a,update:s}=e,o=(u,d=1)=>{const{material:v,engines:k}=ae(e),B=pe.max(1,v.dividedToIntegerBy(k[u].mass)),h=pe.min(B,d);return v.isGreaterThanOrEqualTo(k[u].mass*h)?(k[u].count=k[u].count.plus(h),ae(e).material=v.minus(k[u].mass*h),s(A=>A),!0):!1},_=(u,d=1)=>{const{material:v,engines:k}=ae(e);if(k[u].count.isGreaterThan(0)){const B=pe.min(k[u].count,d);return k[u].count=k[u].count.minus(B),ae(e).material=v.plus(k[u].mass*B),s(h=>h),!0}return!1},g=(u=1)=>{if(u<1)return!0;const{material:d,capture:v}=ae(e),{mass:k,area:B}=v,h=pe.max(1,d.div(k).plus(B).sqrt().minus(B.sqrt()).div(v.step).integerValue(pe.ROUND_FLOOR)),A=pe.min(h,u),M=A*v.step,L=B.sqrt().plus(M).pow(2).minus(B).times(k);return d.isGreaterThanOrEqualTo(L)?(v.count=v.count.plus(A),v.area=B.sqrt().plus(M).pow(2),ae(e).material=d.minus(L),s($=>$),!0):!1},p=(u=1)=>{if(u<1)return!0;const{material:d,capture:v}=ae(e),{mass:k,area:B}=v;if(B.isGreaterThan(0)){const h=pe.min(v.count,u),A=h*v.step,M=B.sqrt().minus(A).pow(2),L=B.minus(M).times(k);return ae(e).material=d.plus(L),v.count=v.count.minus(h),v.area=M,s($=>$),!0}return!1};return{subscribe:t,set:a,update:u=>s(d=>({...d,...u})),reset:()=>a(_t(Je)),getInfo:()=>{const{material:u,fuel:d,engines:v,velocity:k,distance:B,capture:h}=ae(e);let A=d.plus(u),M=pe(0),L=pe(0);return Object.values(v).forEach($=>{$.count.isEqualTo(0)&&($.throttle=0);const S=$.throttle*.01,z=1-Math.sqrt(S)*$.loss;A=A.plus($.count.times($.mass)),$.thrust=$.count.times($.output).times($.count).times($.consumption).times(S).times(z),M=M.plus($.thrust),L=L.plus($.count.times($.consumption).times(S))}),A=A.plus(h.area.times(h.mass)),{distance:B,velocity:k,fuel:d,mass:A,thrust:M,consumption:L,capture:h}},tryBuild:o,tryRecycle:_,tryExpand:g,tryReduce:p,upgradeCapture:u=>{const{capture:d}=ae(e),v=d.count;p(v),ae(e).capture={...ae(e).capture,...u},g(v)},upgradeEngines:(u,d)=>{const{engines:v}=ae(e),k=v[u].count;_(u,k),v[u]={...v[u],...d},o(u,k)}}},ce=Ms(),J={DATA_COLLECTION:"data-collection",RESEARCH_AUTOMATION:"research-automation",FUEL_CAPTURE:"fuel-capture",FUEL_CAPTURE_AUTOMATION:"fuel-capture-automation",FUEL_CAPTURE_MASS:"fuel-capture-mass",MATERIAL_CAPTURE:"material-capture",MATERIAL_CAPTURE_AUTOMATION:"material-capture-automation",FUEL_MATERIAL_CONVERSION:"fuel-material-conversion",[H.COMBUSTION]:{AUTOMATION:"combustion-automation",MASS:"combustion-mass",CONSUMPTION:"combustion-consumption",EFFICIENCY:"combustion-efficiency"},[H.FUSION]:{ENGINE:"fusion-engine",AUTOMATION:"fusion-automation",MASS:"fusion-mass",CONSUMPTION:"fusion-consumption",EFFICIENCY:"fusion-efficiency"},[H.ANTIMATTER]:{ENGINE:"antimatter-engine",AUTOMATION:"antimatter-automation",MASS:"antimatter-mass",CONSUMPTION:"antimatter-consumption",EFFICIENCY:"antimatter-efficiency"}},Pe=(e,t,a,s)=>({title:e,description:t,progress:De,time:pe(a),complete:s}),cs={[J.DATA_COLLECTION]:Pe("Data Collection","Gather observational data as Horizon travels to inform future research.",200,e=>{be.unlock({[J.DATA_COLLECTION]:!0})}),[J.RESEARCH_AUTOMATION]:Pe("Research Automation","Automatically continue research on incremental tasks.",200,e=>{be.unlock({[J.RESEARCH_AUTOMATION]:!0})}),[J.FUEL_CAPTURE]:Pe("Fuel Capture","Develop system to capture trace gases to use as fuel.",100,e=>{be.unlock({[J.FUEL_CAPTURE]:!0}),de.createTask(J.FUEL_CAPTURE_AUTOMATION),de.createTask(J.FUEL_CAPTURE_MASS)}),[J.FUEL_CAPTURE_AUTOMATION]:Pe("Fuel Capture Automation","Automatically expand or reduce the fuel capture net.",30,e=>{be.unlock({[J.FUEL_CAPTURE_AUTOMATION]:!0}),ce.upgradeCapture({automation:{...ae(ce).capture.automation,interval:Math.pow(.9,e.iteration)}}),de.createTask(J.FUEL_CAPTURE_AUTOMATION,e.iteration+1)}),[J.FUEL_CAPTURE_MASS]:Pe("Fuel Capture Mass","Reduce material need to expand the fuel capture net.",25,e=>{ce.upgradeCapture({mass:Je.capture.mass*Math.pow(.85,e.iteration)}),de.createTask(J.FUEL_CAPTURE_MASS,e.iteration+1)}),[J[H.COMBUSTION].AUTOMATION]:Pe("Combustion Engine Automation","Automatically build or recycle combustion engines.",30,e=>{be.unlock({[J[H.COMBUSTION].AUTOMATION]:!0}),ce.upgradeEngines(H.COMBUSTION,{automation:{...ae(ce).engines[H.COMBUSTION].automation,interval:Math.pow(.9,e.iteration)}}),de.createTask(J[H.COMBUSTION].AUTOMATION,e.iteration+1)}),[J[H.COMBUSTION].MASS]:Pe("Combustion Engine Mass","Reduce material needed to build combustion engines.",25,e=>{ce.upgradeEngines(H.COMBUSTION,{mass:Je.engines[H.COMBUSTION].mass*Math.pow(.9,e.iteration)}),de.createTask(J[H.COMBUSTION].MASS,e.iteration+1)}),[J[H.COMBUSTION].CONSUMPTION]:Pe("Combustion Engine Consumption","Increase fuel consumption rate of combustion engines.",25,e=>{ce.upgradeEngines(H.COMBUSTION,{consumption:Je.engines[H.COMBUSTION].consumption.times(e.iteration)}),de.createTask(J[H.COMBUSTION].CONSUMPTION,e.iteration+1)}),[J[H.COMBUSTION].EFFICIENCY]:Pe("Combustion Engine Efficiency","Improve combustion engine propulsion efficiency curve.",25,e=>{ce.upgradeEngines(H.COMBUSTION,{loss:Je.engines[H.COMBUSTION].loss*Math.pow(.9,e.iteration)}),de.createTask(J[H.COMBUSTION].EFFICIENCY,e.iteration+1)}),[J[H.FUSION].ENGINE]:Pe("Fusion Engine","Generate thrust with the power of fusion.",600,e=>{be.unlock({[H.FUSION]:!0}),de.createTask(J[H.ANTIMATTER].ENGINE),de.createTask(J[H.FUSION].AUTOMATION),de.createTask(J[H.FUSION].MASS),de.createTask(J[H.FUSION].EFFICIENCY),de.createTask(J[H.FUSION].CONSUMPTION)}),[J[H.FUSION].AUTOMATION]:Pe("Fusion Engine Automation","Automatically build or recycle fusion engines.",30,e=>{be.unlock({[J[H.FUSION].AUTOMATION]:!0}),ce.upgradeEngines(H.FUSION,{automation:{...ae(ce).engines[H.FUSION].automation,interval:Math.pow(.9,e.iteration)}}),de.createTask(J[H.FUSION].AUTOMATION,e.iteration+1)}),[J[H.FUSION].MASS]:Pe("Fusion Engine Mass","Reduce material needed to build fusion engines.",25,e=>{ce.upgradeEngines(H.FUSION,{mass:Je.engines[H.FUSION].mass*Math.pow(.9,e.iteration)}),de.createTask(J[H.FUSION].MASS,e.iteration+1)}),[J[H.FUSION].CONSUMPTION]:Pe("Fusion Engine Consumption","Increase fuel consumption rate of fusion engines.",25,e=>{ce.upgradeEngines(H.FUSION,{consumption:Je.engines[H.FUSION].consumption.times(e.iteration)}),de.createTask(J[H.FUSION].CONSUMPTION,e.iteration+1)}),[J[H.FUSION].EFFICIENCY]:Pe("Fusion Engine Efficiency","Improve fusion engine propulsion efficiency curve.",25,e=>{ce.upgradeEngines(H.FUSION,{loss:Je.engines[H.FUSION].loss*Math.pow(.9,e.iteration)}),de.createTask(J[H.FUSION].EFFICIENCY,e.iteration+1)}),[J[H.ANTIMATTER].ENGINE]:Pe("Antimatter Engine","Generate thrust with the power of antimatter annihilation.",5e3,e=>{be.unlock({[H.ANTIMATTER]:!0}),de.createTask(J[H.ANTIMATTER].AUTOMATION),de.createTask(J[H.ANTIMATTER].MASS),de.createTask(J[H.ANTIMATTER].EFFICIENCY),de.createTask(J[H.ANTIMATTER].CONSUMPTION)}),[J[H.ANTIMATTER].AUTOMATION]:Pe("Antimatter Engine Automation","Automatically build or recycle antimatter engines.",30,e=>{be.unlock({[J[H.ANTIMATTER].AUTOMATION]:!0}),ce.upgradeEngines(H.ANTIMATTER,{automation:{...ae(ce).engines[H.ANTIMATTER].automation,interval:Math.pow(.9,e.iteration)}}),de.createTask(J[H.ANTIMATTER].AUTOMATION,e.iteration+1)}),[J[H.ANTIMATTER].MASS]:Pe("Antimatter Engine Mass","Reduce material needed to build antimatter engines.",25,e=>{ce.upgradeEngines(H.ANTIMATTER,{mass:Je.engines[H.ANTIMATTER].mass*Math.pow(.9,e.iteration)}),de.createTask(J[H.ANTIMATTER].MASS,e.iteration+1)}),[J[H.ANTIMATTER].CONSUMPTION]:Pe("Antimatter Engine Consumption","Increase fuel consumption rate of antimatter engines.",25,e=>{ce.upgradeEngines(H.ANTIMATTER,{consumption:Je.engines[H.ANTIMATTER].consumption.times(e.iteration)}),de.createTask(J[H.ANTIMATTER].CONSUMPTION,e.iteration+1)}),[J[H.ANTIMATTER].EFFICIENCY]:Pe("Antimatter Engine Efficiency","Improve antimatter engine propulsion efficiency curve.",25,e=>{ce.upgradeEngines(H.ANTIMATTER,{loss:Je.engines[H.ANTIMATTER].loss*Math.pow(.9,e.iteration)}),de.createTask(J[H.ANTIMATTER].EFFICIENCY,e.iteration+1)})},Us=[J.FUEL_CAPTURE,J[H.FUSION].ENGINE,J[H.COMBUSTION].AUTOMATION,J[H.COMBUSTION].MASS,J[H.COMBUSTION].EFFICIENCY],Nn={available:{},active:{},completed:{}},Fs=()=>{const e=At(_t(Nn)),{subscribe:t,set:a,update:s}=e,o=(p,u)=>{const{available:d,active:v}=ae(e),k=_t(cs[p]);delete k.complete,k.iteration=u??1,k.iteration>1&&(k.title=`${k.title} ${k.iteration}`),k.time=k.time.times(Math.pow(1.15,k.iteration-1));const B=p;u!==void 0&&ae(be).unlocks[J.RESEARCH_AUTOMATION]&&(v[B]=k),d[B]=k,s(h=>h)};let _=()=>{};return{subscribe:t,set:a,update:p=>s(u=>({...u,...p})),reset:()=>a(_t(Nn)),createTask:o,setAvailable:p=>{const{available:u,active:d}=ae(e);u[p]=d[p],delete d[p],s(v=>v)},setActive:p=>{const{active:u,available:d}=ae(e);u[p]=d[p],s(v=>v)},setCompleted:p=>{const{available:u,active:d,completed:v}=ae(e),k=v[p]=u[p];_(k),delete u[p],delete d[p],s(B=>B)},initialize:()=>{Us.forEach(p=>o(p))},setCompleteCallback:p=>{_=p}}},de=Fs(),On={departed:!1,unlocks:{[H.COMBUSTION]:!0}},Cs=()=>{const e=At(_t(On)),{subscribe:t,set:a,update:s}=e;return{subscribe:t,set:a,update:_=>{s(g=>({...g,..._}))},unlock:_=>s(g=>({...g,unlocks:{...g.unlocks,..._}})),reset:()=>a(_t(On))}},be=Cs(),zt=At(0),bs=()=>{ae(zt)==0&&zt.set(Date.now()),requestAnimationFrame(fs)},Ut=At(mt),Ht=At(De),Yt=At(De),Wt=At(1),fs=()=>{const e=Date.now(),t=An.times((e-ae(zt))*.001);let a=ce.getInfo();if(a.thrust.isGreaterThan(0)&&!ae(be).departed&&(be.update({departed:!0}),de.initialize()),ae(be).departed)if(t.isLessThan(dn))_n(t,a);else if(t.isGreaterThanOrEqualTo(dn*mn))for(let s=0;s<mn;s++)a=ce.getInfo(),_n(t.div(mn),a);else{const s=Math.ceil(+t/dn);console.log(s);for(let o=0;o<s;o++)a=ce.getInfo(),_n(t.div(s),a)}zt.set(e),requestAnimationFrame(fs)},_n=(e,{distance:t,velocity:a,mass:s,fuel:o,thrust:_,consumption:g,capture:p})=>{Ut.set(mt.div(mt.minus(a.pow(2).div(ln)).sqrt()));const u=ae(Ut),d=a.times(e).times(u),v=t.plus(d),k=p.area.times(p.rate).times(d),B=pe.min(g.times(e),o.plus(k)),h=g.isGreaterThan(0)?B.div(g):De,M=u.minus(1).times(s).times(ln).plus(_.times(h)),L=mt.minus(mt.div(M.div(s.plus(k).times(ln)).plus(1)).pow(2)).sqrt().times(on);ce.update({distance:v,velocity:L,fuel:o.plus(k).minus(B)});const $=+e,{engines:S}=ae(ce);Object.keys(S).forEach(r=>{const{automation:l}=S[r];if(l.mode!=="off"){if(l.timer>=l.interval){const T=Math.floor(l.timer/l.interval);l.mode==="build"?ce.tryBuild(r,T):l.mode==="recycle"&&ce.tryRecycle(r,T),l.timer-=l.interval*T}l.timer+=$}});const{automation:z}=p;if(z.mode!=="off"){if(z.timer>=z.interval){const r=Math.floor(z.timer/z.interval);z.mode==="expand"?ce.tryExpand(r):z.mode==="reduce"&&ce.tryReduce(r),z.timer-=z.interval*r}z.timer+=$}Ht.set(ae(Ht).plus(e.div(An)));const q=u.times(e),{available:Q,active:W,completed:Y}=ae(de),n=Object.keys(W);Wt.set(1/Math.sqrt(n.length)),n.forEach(r=>{const l=W[r];l.progress=l.progress.plus(q.times(ae(Wt))),l.progress.isGreaterThan(l.time)&&(de.setCompleted(r),cs[r].complete(l),Object.keys(Y).length>=3&&Q[J.RESEARCH_AUTOMATION]===void 0&&!ae(be).unlocks[J.RESEARCH_AUTOMATION]&&de.createTask(J.RESEARCH_AUTOMATION))}),de.update(r=>r),Yt.set(ae(Yt).plus(q.div(An)))};function Ps(e){let t,a,s,o,_,g;const p=e[5].default,u=_s(p,e,e[4],null);return{c(){t=F("div"),a=F("h1"),s=b(e[0]),o=K(),_=F("div"),u&&u.c(),this.h()},l(d){t=C(d,"DIV",{class:!0,style:!0});var v=R(t);a=C(v,"H1",{class:!0});var k=R(a);s=P(k,e[0]),k.forEach(w),o=j(v),_=C(v,"DIV",{class:!0,style:!0});var B=R(_);u&&u.l(B),B.forEach(w),v.forEach(w),this.h()},h(){D(a,"class","title svelte-1eqadof"),D(_,"class","box svelte-1eqadof"),D(_,"style",e[2]),D(t,"class","box-container svelte-1eqadof"),D(t,"style",e[1])},m(d,v){fe(d,t,v),i(t,a),i(a,s),i(t,o),i(t,_),u&&u.m(_,null),g=!0},p(d,[v]){(!g||v&1)&&ue(s,d[0]),u&&u.p&&(!g||v&16)&&gs(u,p,d,d[4],g?Es(p,d[4],v,null):vs(d[4]),null),(!g||v&2)&&D(t,"style",d[1])},i(d){g||(Ne(u,d),g=!0)},o(d){Ue(u,d),g=!1},d(d){d&&w(t),u&&u.d(d)}}}function Rs(e,t,a){let{$$slots:s={},$$scope:o}=t,{title:_=""}=t,{style:g=""}=t,{border:p="4px double black"}=t;const u=`border:${p}`;return e.$$set=d=>{"title"in d&&a(0,_=d.title),"style"in d&&a(1,g=d.style),"border"in d&&a(3,p=d.border),"$$scope"in d&&a(4,o=d.$$scope)},[_,g,u,p,o,s]}class ps extends Ft{constructor(t){super(),Ct(this,t,Rs,Ps,bt,{title:0,style:1,border:3})}}function ys(e){let t,a,s,o,_,g,p,u,d,v,k,B,h,A,M,L;return{c(){t=F("div"),a=F("p"),s=b("Spacecraft Horizon is in orbit and ready for departure."),o=K(),_=F("p"),g=b("As its crew, you will explore the furthest reaches of the universe."),p=K(),u=F("p"),d=b("We've provided you with significant amounts of building material, as well as some starting engines and fuel."),v=K(),k=F("p"),B=b("Furthermore, we will immediately begin research into technologies to maintain and accelerate your journey."),h=K(),A=F("p"),M=F("span"),L=b("Engage your engine throttle to depart."),this.h()},l($){t=C($,"DIV",{class:!0});var S=R(t);a=C(S,"P",{});var z=R(a);s=P(z,"Spacecraft Horizon is in orbit and ready for departure."),z.forEach(w),o=j(S),_=C(S,"P",{});var q=R(_);g=P(q,"As its crew, you will explore the furthest reaches of the universe."),q.forEach(w),p=j(S),u=C(S,"P",{});var Q=R(u);d=P(Q,"We've provided you with significant amounts of building material, as well as some starting engines and fuel."),Q.forEach(w),v=j(S),k=C(S,"P",{});var W=R(k);B=P(W,"Furthermore, we will immediately begin research into technologies to maintain and accelerate your journey."),W.forEach(w),h=j(S),A=C(S,"P",{});var Y=R(A);M=C(Y,"SPAN",{});var n=R(M);L=P(n,"Engage your engine throttle to depart."),n.forEach(w),Y.forEach(w),S.forEach(w),this.h()},h(){Gt(M,"emphasis",!e[0].departed),D(t,"class","column gap-medium")},m($,S){fe($,t,S),i(t,a),i(a,s),i(t,o),i(t,_),i(_,g),i(t,p),i(t,u),i(u,d),i(t,v),i(t,k),i(k,B),i(t,h),i(t,A),i(A,M),i(M,L)},p($,[S]){S&1&&Gt(M,"emphasis",!$[0].departed)},i:Mt,o:Mt,d($){$&&w(t)}}}function $s(e,t,a){let s;return it(e,be,o=>a(0,s=o)),[s]}class Bs extends Ft{constructor(t){super(),Ct(this,t,$s,ys,bt,{})}}function Ln(e,t,a){const s=e.slice();s[4]=t[a];const o=s[0].completed[s[4]];return s[5]=o,s}function Vn(e,t,a){const s=e.slice();s[4]=t[a];const o=s[0].active[s[4]];s[5]=o;const _=mt.times(100).div(s[5].time).times(s[1]);s[8]=_;const g=s[8].isLessThan(.01)?s[8].isLessThan(1e-4)?s[8].toExponential(1):s[8].toFixed(4):s[8].toFixed(2);return s[9]=g,s}function qn(e,t,a){const s=e.slice();s[4]=t[a];const o=s[0].active[s[4]]??s[0].available[s[4]];return s[5]=o,s}function Gn(e,t){let a,s,o,_=t[5].title+"",g,p,u,d,v=t[5].description+"",k,B,h,A=t[5].progress.div(t[5].time).times(100).toFixed(2)+"",M,L,$,S,z,q,Q;function W(){return t[2](t[4])}return{key:e,first:null,c(){a=F("button"),s=F("p"),o=F("b"),g=b(_),p=b(":"),u=K(),d=F("span"),k=b(v),B=b(`\r
              (`),h=F("span"),M=b(A),L=b("%"),$=b(")"),S=K(),this.h()},l(Y){a=C(Y,"BUTTON",{});var n=R(a);s=C(n,"P",{});var r=R(s);o=C(r,"B",{class:!0});var l=R(o);g=P(l,_),p=P(l,":"),l.forEach(w),u=j(r),d=C(r,"SPAN",{class:!0});var T=R(d);k=P(T,v),B=P(T,`\r
              (`),h=C(T,"SPAN",{class:!0});var f=R(h);M=P(f,A),L=P(f,"%"),f.forEach(w),$=P(T,")"),T.forEach(w),r.forEach(w),S=j(n),n.forEach(w),this.h()},h(){D(o,"class","svelte-pdwgpk"),D(h,"class","num"),D(d,"class","plain svelte-pdwgpk"),a.disabled=z=t[0].active[t[4]],this.first=a},m(Y,n){fe(Y,a,n),i(a,s),i(s,o),i(o,g),i(o,p),i(s,u),i(s,d),i(d,k),i(d,B),i(d,h),i(h,M),i(h,L),i(d,$),i(a,S),q||(Q=$e(a,"click",W),q=!0)},p(Y,n){t=Y,n&1&&_!==(_=t[5].title+"")&&ue(g,_),n&1&&v!==(v=t[5].description+"")&&ue(k,v),n&1&&A!==(A=t[5].progress.div(t[5].time).times(100).toFixed(2)+"")&&ue(M,A),n&1&&z!==(z=t[0].active[t[4]])&&(a.disabled=z)},d(Y){Y&&w(a),q=!1,Q()}}}function zn(e,t){let a,s,o,_=t[5].title+"",g,p,u,d,v,k=t[9]+"",B,h,A,M,L,$;function S(){return t[3](t[4])}return{key:e,first:null,c(){a=F("button"),s=F("p"),o=F("b"),g=b(_),p=K(),u=F("span"),d=b("("),v=F("span"),B=b(k),h=b("%"),A=b(" per second)"),M=K(),this.h()},l(z){a=C(z,"BUTTON",{});var q=R(a);s=C(q,"P",{});var Q=R(s);o=C(Q,"B",{class:!0});var W=R(o);g=P(W,_),W.forEach(w),p=j(Q),u=C(Q,"SPAN",{class:!0});var Y=R(u);d=P(Y,"("),v=C(Y,"SPAN",{class:!0});var n=R(v);B=P(n,k),h=P(n,"%"),n.forEach(w),A=P(Y," per second)"),Y.forEach(w),Q.forEach(w),M=j(q),q.forEach(w),this.h()},h(){D(o,"class","svelte-pdwgpk"),D(v,"class","num"),D(u,"class","plain svelte-pdwgpk"),this.first=a},m(z,q){fe(z,a,q),i(a,s),i(s,o),i(o,g),i(s,p),i(s,u),i(u,d),i(u,v),i(v,B),i(v,h),i(u,A),i(a,M),L||($=$e(a,"click",S),L=!0)},p(z,q){t=z,q&1&&_!==(_=t[5].title+"")&&ue(g,_),q&3&&k!==(k=t[9]+"")&&ue(B,k)},d(z){z&&w(a),L=!1,$()}}}function Hn(e,t){let a,s,o,_=t[5].title+"",g,p;return{key:e,first:null,c(){a=F("button"),s=F("p"),o=F("b"),g=b(_),p=K(),this.h()},l(u){a=C(u,"BUTTON",{class:!0});var d=R(a);s=C(d,"P",{});var v=R(s);o=C(v,"B",{class:!0});var k=R(o);g=P(k,_),k.forEach(w),v.forEach(w),p=j(d),d.forEach(w),this.h()},h(){D(o,"class","svelte-pdwgpk"),D(a,"class","no-interact"),a.disabled=!0,this.first=a},m(u,d){fe(u,a,d),i(a,s),i(s,o),i(o,g),i(a,p)},p(u,d){t=u,d&1&&_!==(_=t[5].title+"")&&ue(g,_)},d(u){u&&w(a)}}}function Ds(e){let t,a,s,o,_,g,p,u,d,v=[],k=new Map,B,h,A,M,L,$,S,z,q=[],Q=new Map,W,Y,n,r,l,T,f,m=[],I=new Map,c=Object.keys(e[0].available);const E=y=>y[4];for(let y=0;y<c.length;y+=1){let V=qn(e,c,y),X=E(V);k.set(X,v[y]=Gn(X,V))}let O=Object.keys(e[0].active);const N=y=>y[4];for(let y=0;y<O.length;y+=1){let V=Vn(e,O,y),X=N(V);Q.set(X,q[y]=zn(X,V))}let U=Object.keys(e[0].completed);const G=y=>y[4];for(let y=0;y<U.length;y+=1){let V=Ln(e,U,y),X=G(V);I.set(X,m[y]=Hn(X,V))}return{c(){t=F("div"),a=F("h2"),s=b("Research Tasks"),o=K(),_=F("div"),g=F("div"),p=F("h3"),u=b("Available"),d=K();for(let y=0;y<v.length;y+=1)v[y].c();B=K(),h=F("div"),A=K(),M=F("div"),L=F("div"),$=F("h3"),S=b("Researching"),z=K();for(let y=0;y<q.length;y+=1)q[y].c();W=K(),Y=F("div"),n=K(),r=F("div"),l=F("h3"),T=b("Completed"),f=K();for(let y=0;y<m.length;y+=1)m[y].c();this.h()},l(y){t=C(y,"DIV",{});var V=R(t);a=C(V,"H2",{});var X=R(a);s=P(X,"Research Tasks"),X.forEach(w),o=j(V),_=C(V,"DIV",{class:!0});var ne=R(_);g=C(ne,"DIV",{class:!0,style:!0});var Z=R(g);p=C(Z,"H3",{});var se=R(p);u=P(se,"Available"),se.forEach(w),d=j(Z);for(let Ee=0;Ee<v.length;Ee+=1)v[Ee].l(Z);Z.forEach(w),B=j(ne),h=C(ne,"DIV",{class:!0}),R(h).forEach(w),A=j(ne),M=C(ne,"DIV",{class:!0});var me=R(M);L=C(me,"DIV",{class:!0});var Ie=R(L);$=C(Ie,"H3",{});var we=R($);S=P(we,"Researching"),we.forEach(w),Ie.forEach(w),z=j(me);for(let Ee=0;Ee<q.length;Ee+=1)q[Ee].l(me);me.forEach(w),W=j(ne),Y=C(ne,"DIV",{class:!0}),R(Y).forEach(w),n=j(ne),r=C(ne,"DIV",{class:!0});var Ae=R(r);l=C(Ae,"H3",{});var he=R(l);T=P(he,"Completed"),he.forEach(w),f=j(Ae);for(let Ee=0;Ee<m.length;Ee+=1)m[Ee].l(Ae);Ae.forEach(w),ne.forEach(w),V.forEach(w),this.h()},h(){D(g,"class","column gap-small svelte-pdwgpk"),rs(g,"width","70%"),D(h,"class","vr svelte-pdwgpk"),D(L,"class","row svelte-pdwgpk"),D(M,"class","column gap-small svelte-pdwgpk"),D(Y,"class","vr svelte-pdwgpk"),D(r,"class","column gap-small svelte-pdwgpk"),D(_,"class","row gap-medium svelte-pdwgpk")},m(y,V){fe(y,t,V),i(t,a),i(a,s),i(t,o),i(t,_),i(_,g),i(g,p),i(p,u),i(g,d);for(let X=0;X<v.length;X+=1)v[X]&&v[X].m(g,null);i(_,B),i(_,h),i(_,A),i(_,M),i(M,L),i(L,$),i($,S),i(M,z);for(let X=0;X<q.length;X+=1)q[X]&&q[X].m(M,null);i(_,W),i(_,Y),i(_,n),i(_,r),i(r,l),i(l,T),i(r,f);for(let X=0;X<m.length;X+=1)m[X]&&m[X].m(r,null)},p(y,[V]){V&1&&(c=Object.keys(y[0].available),v=un(v,V,E,1,y,c,k,g,cn,Gn,null,qn)),V&3&&(O=Object.keys(y[0].active),q=un(q,V,N,1,y,O,Q,M,cn,zn,null,Vn)),V&1&&(U=Object.keys(y[0].completed),m=un(m,V,G,1,y,U,I,r,cn,Hn,null,Ln))},i:Mt,o:Mt,d(y){y&&w(t);for(let V=0;V<v.length;V+=1)v[V].d();for(let V=0;V<q.length;V+=1)q[V].d();for(let V=0;V<m.length;V+=1)m[V].d()}}}function Ls(e,t,a){let s,o;return it(e,de,p=>a(0,s=p)),it(e,Wt,p=>a(1,o=p)),[s,o,p=>de.setActive(p),p=>de.setAvailable(p)]}class Vs extends Ft{constructor(t){super(),Ct(this,t,Ls,Ds,bt,{})}}function qs(e){let t,a,s,o=e[1].toFixed(2)+"",_,g,p=e[0].toFixed(2)+"",u,d;return{c(){t=F("p"),a=b("Time: "),s=F("span"),_=b(o),g=b("s (passing at "),u=b(p),d=b("x Horizon time)"),this.h()},l(v){t=C(v,"P",{});var k=R(t);a=P(k,"Time: "),s=C(k,"SPAN",{class:!0});var B=R(s);_=P(B,o),B.forEach(w),g=P(k,"s (passing at "),u=P(k,p),d=P(k,"x Horizon time)"),k.forEach(w),this.h()},h(){D(s,"class","num")},m(v,k){fe(v,t,k),i(t,a),i(t,s),i(s,_),i(t,g),i(t,u),i(t,d)},p(v,k){k&2&&o!==(o=v[1].toFixed(2)+"")&&ue(_,o),k&1&&p!==(p=v[0].toFixed(2)+"")&&ue(u,p)},d(v){v&&w(t)}}}function Gs(e){let t,a,s,o=e[1].toFixed(2)+"",_,g;return{c(){t=F("p"),a=b("Time: "),s=F("span"),_=b(o),g=b("s"),this.h()},l(p){t=C(p,"P",{});var u=R(t);a=P(u,"Time: "),s=C(u,"SPAN",{class:!0});var d=R(s);_=P(d,o),d.forEach(w),g=P(u,"s"),u.forEach(w),this.h()},h(){D(s,"class","num")},m(p,u){fe(p,t,u),i(t,a),i(t,s),i(s,_),i(t,g)},p(p,u){u&2&&o!==(o=p[1].toFixed(2)+"")&&ue(_,o)},d(p){p&&w(t)}}}function zs(e){let t,a,s,o,_,g,p,u,d,v,k,B,h,A,M,L,$;function S(Q,W){return W&1&&(s=null),s==null&&(s=!!Q[0].isLessThan(1.01)),s?Gs:qs}let z=S(e,-1),q=z(e);return B=new Bs({}),L=new Vs({}),{c(){t=F("div"),a=F("div"),q.c(),o=K(),_=F("hr"),g=K(),p=F("details"),u=F("summary"),d=F("span"),v=b("Horizon Mission Memo"),k=K(),gt(B.$$.fragment),h=K(),A=F("hr"),M=K(),gt(L.$$.fragment),this.h()},l(Q){t=C(Q,"DIV",{class:!0});var W=R(t);a=C(W,"DIV",{class:!0});var Y=R(a);q.l(Y),Y.forEach(w),o=j(W),_=C(W,"HR",{}),g=j(W),p=C(W,"DETAILS",{class:!0});var n=R(p);u=C(n,"SUMMARY",{class:!0});var r=R(u);d=C(r,"SPAN",{});var l=R(d);v=P(l,"Horizon Mission Memo"),l.forEach(w),r.forEach(w),k=j(n),vt(B.$$.fragment,n),n.forEach(w),h=j(W),A=C(W,"HR",{}),M=j(W),vt(L.$$.fragment,W),W.forEach(w),this.h()},h(){D(a,"class","column gap-small"),Gt(d,"emphasis",!e[2].departed),D(u,"class","svelte-q954p0"),D(p,"class","svelte-q954p0"),D(t,"class","column gap-medium")},m(Q,W){fe(Q,t,W),i(t,a),q.m(a,null),i(t,o),i(t,_),i(t,g),i(t,p),i(p,u),i(u,d),i(d,v),i(p,k),Et(B,p,null),i(t,h),i(t,A),i(t,M),Et(L,t,null),$=!0},p(Q,W){z===(z=S(Q,W))&&q?q.p(Q,W):(q.d(1),q=z(Q),q&&(q.c(),q.m(a,null))),(!$||W&4)&&Gt(d,"emphasis",!Q[2].departed)},i(Q){$||(Ne(B.$$.fragment,Q),Ne(L.$$.fragment,Q),$=!0)},o(Q){Ue(B.$$.fragment,Q),Ue(L.$$.fragment,Q),$=!1},d(Q){Q&&w(t),q.d(),Tt(B),Tt(L)}}}function Hs(e){let t,a;return t=new ps({props:{title:"Earth",$$slots:{default:[zs]},$$scope:{ctx:e}}}),{c(){gt(t.$$.fragment)},l(s){vt(t.$$.fragment,s)},m(s,o){Et(t,s,o),a=!0},p(s,[o]){const _={};o&15&&(_.$$scope={dirty:o,ctx:s}),t.$set(_)},i(s){a||(Ne(t.$$.fragment,s),a=!0)},o(s){Ue(t.$$.fragment,s),a=!1},d(s){Tt(t,s)}}}function Ys(e,t,a){let s,o,_;return it(e,Ut,g=>a(0,s=g)),it(e,Yt,g=>a(1,o=g)),it(e,be,g=>a(2,_=g)),[s,o,_]}class Ws extends Ft{constructor(t){super(),Ct(this,t,Ys,Hs,bt,{})}}var Xs=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},In={},Js={get exports(){return In},set exports(e){In=e}};/*! Case - v1.6.2 - 2020-03-24
* Copyright (c) 2020 Nathan Bubna; Licensed MIT, GPL */(function(e){(function(){var t=function(h,A){return A=A||"",h.replace(/(^|-)/g,"$1\\u"+A).replace(/,/g,"\\u"+A)},a=t("20-26,28-2F,3A-40,5B-60,7B-7E,A0-BF,D7,F7","00"),s="a-z"+t("DF-F6,F8-FF","00"),o="A-Z"+t("C0-D6,D8-DE","00"),_="A|An|And|As|At|But|By|En|For|If|In|Of|On|Or|The|To|Vs?\\.?|Via",g=function(h,A,M,L){return h=h||a,A=A||s,M=M||o,L=L||_,{capitalize:new RegExp("(^|["+h+"])(["+A+"])","g"),pascal:new RegExp("(^|["+h+"])+(["+A+M+"])","g"),fill:new RegExp("["+h+"]+(.|$)","g"),sentence:new RegExp('(^\\s*|[\\?\\!\\.]+"?\\s+"?|,\\s+")(['+A+"])","g"),improper:new RegExp("\\b("+L+")\\b","g"),relax:new RegExp("([^"+M+"])(["+M+"]*)(["+M+"])(?=[^"+M+"]|$)","g"),upper:new RegExp("^[^"+A+"]+$"),hole:/[^\s]\s[^\s]/,apostrophe:/'/g,room:new RegExp("["+h+"]")}},p=g(),u={re:p,unicodes:t,regexps:g,types:[],up:String.prototype.toUpperCase,low:String.prototype.toLowerCase,cap:function(h){return u.up.call(h.charAt(0))+h.slice(1)},decap:function(h){return u.low.call(h.charAt(0))+h.slice(1)},deapostrophe:function(h){return h.replace(p.apostrophe,"")},fill:function(h,A,M){return A!=null&&(h=h.replace(p.fill,function(L,$){return $?A+$:""})),M&&(h=u.deapostrophe(h)),h},prep:function(h,A,M,L){if(h=h==null?"":h+"",!L&&p.upper.test(h)&&(h=u.low.call(h)),!A&&!p.hole.test(h)){var $=u.fill(h," ");p.hole.test($)&&(h=$)}return!M&&!p.room.test(h)&&(h=h.replace(p.relax,u.relax)),h},relax:function(h,A,M,L){return A+" "+(M?M+" ":"")+L}},d={_:u,of:function(h){for(var A=0,M=u.types.length;A<M;A++)if(d[u.types[A]].apply(d,arguments)===h)return u.types[A]},flip:function(h){return h.replace(/\w/g,function(A){return(A==u.up.call(A)?u.low:u.up).call(A)})},random:function(h){return h.replace(/\w/g,function(A){return(Math.round(Math.random())?u.up:u.low).call(A)})},type:function(h,A){d[h]=A,u.types.push(h)}},v={lower:function(h,A,M){return u.fill(u.low.call(u.prep(h,A)),A,M)},snake:function(h){return d.lower(h,"_",!0)},constant:function(h){return d.upper(h,"_",!0)},camel:function(h){return u.decap(d.pascal(h))},kebab:function(h){return d.lower(h,"-",!0)},upper:function(h,A,M){return u.fill(u.up.call(u.prep(h,A,!1,!0)),A,M)},capital:function(h,A,M){return u.fill(u.prep(h).replace(p.capitalize,function(L,$,S){return $+u.up.call(S)}),A,M)},header:function(h){return d.capital(h,"-",!0)},pascal:function(h){return u.fill(u.prep(h,!1,!0).replace(p.pascal,function(A,M,L){return u.up.call(L)}),"",!0)},title:function(h){return d.capital(h).replace(p.improper,function(A,M,L,$){return L>0&&L<$.lastIndexOf(" ")?u.low.call(A):A})},sentence:function(h,A,M){return h=d.lower(h).replace(p.sentence,function(L,$,S){return $+u.up.call(S)}),A&&A.forEach(function(L){h=h.replace(new RegExp("\\b"+d.lower(L)+"\\b","g"),u.cap)}),M&&M.forEach(function(L){h=h.replace(new RegExp("(\\b"+d.lower(L)+"\\. +)(\\w)"),function($,S,z){return S+u.low.call(z)})}),h}};v.squish=v.pascal,d.default=d;for(var k in v)d.type(k,v[k]);var B=typeof B=="function"?B:function(){};B(e.exports?e.exports=d:this.Case=d)}).call(Xs)})(Js);const Yn=In;function Wn(e,t,a){const s=e.slice();return s[6]=t[a],s}function Xn(e){let t,a,s,o,_=!1,g,p=e[6]+"",u,d,v,k,B,h;return k=Ts(e[5][0]),{c(){t=F("div"),a=F("input"),g=F("label"),u=b(p),v=K(),this.h()},l(A){t=C(A,"DIV",{class:!0});var M=R(t);a=C(M,"INPUT",{type:!0,id:!0,name:!0}),g=C(M,"LABEL",{class:!0,for:!0});var L=R(g);u=P(L,p),L.forEach(w),v=j(M),M.forEach(w),this.h()},h(){D(a,"type","radio"),D(a,"id",s=e[2]+"-"+e[6]),D(a,"name",e[2]),a.__value=o=e[6],a.value=a.__value,D(g,"class","radio-label svelte-3b7bd8"),D(g,"for",d=e[2]+"-"+e[6]),D(t,"class","row gap-small"),k.p(a)},m(A,M){fe(A,t,M),i(t,a),a.checked=a.__value===e[0],i(t,g),i(g,u),i(t,v),B||(h=$e(a,"change",e[4]),B=!0)},p(A,M){M&12&&s!==(s=A[2]+"-"+A[6])&&D(a,"id",s),M&4&&D(a,"name",A[2]),M&8&&o!==(o=A[6])&&(a.__value=o,a.value=a.__value,_=!0),(_||M&9)&&(a.checked=a.__value===A[0]),M&8&&p!==(p=A[6]+"")&&ue(u,p),M&12&&d!==(d=A[2]+"-"+A[6])&&D(g,"for",d)},d(A){A&&w(t),k.r(),B=!1,h()}}}function Ks(e){let t,a,s,o,_,g=e[3],p=[];for(let u=0;u<g.length;u+=1)p[u]=Xn(Wn(e,g,u));return{c(){t=F("p"),a=b(e[1]),s=b(":"),o=K();for(let u=0;u<p.length;u+=1)p[u].c();_=rn()},l(u){t=C(u,"P",{});var d=R(t);a=P(d,e[1]),s=P(d,":"),d.forEach(w),o=j(u);for(let v=0;v<p.length;v+=1)p[v].l(u);_=rn()},m(u,d){fe(u,t,d),i(t,a),i(t,s),fe(u,o,d);for(let v=0;v<p.length;v+=1)p[v]&&p[v].m(u,d);fe(u,_,d)},p(u,[d]){if(d&2&&ue(a,u[1]),d&13){g=u[3];let v;for(v=0;v<g.length;v+=1){const k=Wn(u,g,v);p[v]?p[v].p(k,d):(p[v]=Xn(k),p[v].c(),p[v].m(_.parentNode,_))}for(;v<p.length;v+=1)p[v].d(1);p.length=g.length}},i:Mt,o:Mt,d(u){u&&w(t),u&&w(o),Tn(p,u),u&&w(_)}}}function js(e,t,a){let{title:s="Auto"}=t,{name:o=""}=t,{options:_=[]}=t,{group:g}=t;const p=[[]];function u(){g=this.__value,a(0,g)}return e.$$set=d=>{"title"in d&&a(1,s=d.title),"name"in d&&a(2,o=d.name),"options"in d&&a(3,_=d.options),"group"in d&&a(0,g=d.group)},[g,s,o,_,u,p]}class hs extends Ft{constructor(t){super(),Ct(this,t,js,Ks,bt,{title:1,name:2,options:3,group:0})}}function Qs(e){const t=e-1;return t*t*t+1}function Jn(e,{delay:t=0,duration:a=400,easing:s=Qs,axis:o="y"}={}){const _=getComputedStyle(e),g=+_.opacity,p=o==="y"?"height":"width",u=parseFloat(_[p]),d=o==="y"?["top","bottom"]:["left","right"],v=d.map($=>`${$[0].toUpperCase()}${$.slice(1)}`),k=parseFloat(_[`padding${v[0]}`]),B=parseFloat(_[`padding${v[1]}`]),h=parseFloat(_[`margin${v[0]}`]),A=parseFloat(_[`margin${v[1]}`]),M=parseFloat(_[`border${v[0]}Width`]),L=parseFloat(_[`border${v[1]}Width`]);return{delay:t,duration:a,easing:s,css:$=>`overflow: hidden;opacity: ${Math.min($*20,1)*g};${p}: ${$*u}px;padding-${d[0]}: ${$*k}px;padding-${d[1]}: ${$*B}px;margin-${d[0]}: ${$*h}px;margin-${d[1]}: ${$*A}px;border-${d[0]}-width: ${$*M}px;border-${d[1]}-width: ${$*L}px;`}}function Kn(e,t,a){const s=e.slice();return s[23]=t[a],s[24]=t,s[25]=a,s}function gn(e){const t=e.slice(),a=1-Math.sqrt(t[26].throttle*.01)*t[26].loss;return t[27]=a,t}function vn(e){const t=e.slice(),a=t[1].engines[t[23]];return t[26]=a,t}function En(e){const t=e.slice(),a=t[1].capture;return t[28]=a.step,t[6]=a.mass,t[29]=a.area,t[30]=a.rate,t}function jn(e,t,a){const s=e.slice();return s[31]=t[a],s}function Qn(e){let t,a=`${e[31].text}`,s,o,_;return{c(){t=F("p"),s=b(a),this.h()},l(g){t=C(g,"P",{class:!0});var p=R(t);s=P(p,a),p.forEach(w),this.h()},h(){D(t,"class","svelte-a4vctt")},m(g,p){fe(g,t,p),i(t,s),_=!0},p(g,p){(!_||p[0]&8)&&a!==(a=`${g[31].text}`)&&ue(s,a)},i(g){_||(Ns(()=>{_&&(o||(o=$n(t,Jn,{duration:300},!0)),o.run(1))}),_=!0)},o(g){o||(o=$n(t,Jn,{duration:300},!1)),o.run(0),_=!1},d(g){g&&w(t),g&&o&&o.end()}}}function Zn(e){let t,a,s,o,_,g,p=e[29]+"",u,d,v,k,B,h,A,M,L,$,S,z=e[29].sqrt().plus(e[28]).pow(2).minus(e[29])+"",q,Q,W,Y,n,r,l,T=(e[29].isGreaterThan(0)?e[29].minus(pe.max(0,e[29].sqrt().minus(e[28]).pow(2))):0)+"",f,m,I,c,E,O,N,U,G=e[29].times(e[6]).toFixed(2)+"",y,V,X,ne=e[6].toFixed(5)+"",Z,se,me,Ie,we,Ae,he=e[30].times(e[29]).toExponential(2)+"",Ee,Oe,ge,_e,We,Te=e[0].unlocks[J.FUEL_CAPTURE_AUTOMATION]&&xn(e);return{c(){t=F("hr"),a=K(),s=F("div"),o=F("h3"),_=b("Fuel Capture Net: "),g=F("span"),u=b(p),d=b("m"),v=F("sup"),k=b("2"),B=K(),h=F("div"),A=F("div"),M=F("button"),L=b("Expand ("),$=F("span"),S=b("+"),q=b(z),Q=b(")"),W=K(),Y=F("button"),n=b("Reduce ("),r=F("span"),l=b("-"),f=b(T),m=b(")"),I=K(),c=F("div"),Te&&Te.c(),E=K(),O=F("p"),N=b("Mass: "),U=F("span"),y=b(G),V=b("kg ("),X=F("span"),Z=b(ne),se=b("PU)"),me=K(),Ie=F("p"),we=b("Capture Rate: "),Ae=F("span"),Ee=b(he),Oe=b("kg/m of travel"),this.h()},l(x){t=C(x,"HR",{}),a=j(x),s=C(x,"DIV",{class:!0});var ve=R(s);o=C(ve,"H3",{});var qe=R(o);_=P(qe,"Fuel Capture Net: "),g=C(qe,"SPAN",{class:!0});var Le=R(g);u=P(Le,p),Le.forEach(w),d=P(qe,"m"),v=C(qe,"SUP",{});var et=R(v);k=P(et,"2"),et.forEach(w),qe.forEach(w),B=j(ve),h=C(ve,"DIV",{class:!0});var Fe=R(h);A=C(Fe,"DIV",{class:!0});var Re=R(A);M=C(Re,"BUTTON",{});var Xe=R(M);L=P(Xe,"Expand ("),$=C(Xe,"SPAN",{class:!0});var Ge=R($);S=P(Ge,"+"),q=P(Ge,z),Ge.forEach(w),Q=P(Xe,")"),Xe.forEach(w),W=j(Re),Y=C(Re,"BUTTON",{});var ze=R(Y);n=P(ze,"Reduce ("),r=C(ze,"SPAN",{class:!0});var Qe=R(r);l=P(Qe,"-"),f=P(Qe,T),Qe.forEach(w),m=P(ze,")"),ze.forEach(w),Re.forEach(w),Fe.forEach(w),I=j(ve),c=C(ve,"DIV",{class:!0});var ot=R(c);Te&&Te.l(ot),ot.forEach(w),E=j(ve),O=C(ve,"P",{});var te=R(O);N=P(te,"Mass: "),U=C(te,"SPAN",{class:!0});var ie=R(U);y=P(ie,G),ie.forEach(w),V=P(te,"kg ("),X=C(te,"SPAN",{class:!0});var at=R(X);Z=P(at,ne),at.forEach(w),se=P(te,"PU)"),te.forEach(w),me=j(ve),Ie=C(ve,"P",{});var He=R(Ie);we=P(He,"Capture Rate: "),Ae=C(He,"SPAN",{class:!0});var Ve=R(Ae);Ee=P(Ve,he),Ve.forEach(w),Oe=P(He,"kg/m of travel"),He.forEach(w),ve.forEach(w),this.h()},h(){D(g,"class","num"),D($,"class","num"),D(r,"class","num"),D(A,"class","row gap-small"),D(h,"class","row gap-medium"),D(c,"class","row gap-medium"),D(U,"class","num"),D(X,"class","num"),D(Ae,"class","num"),D(s,"class","column gap-small")},m(x,ve){fe(x,t,ve),fe(x,a,ve),fe(x,s,ve),i(s,o),i(o,_),i(o,g),i(g,u),i(o,d),i(o,v),i(v,k),i(s,B),i(s,h),i(h,A),i(A,M),i(M,L),i(M,$),i($,S),i($,q),i(M,Q),i(A,W),i(A,Y),i(Y,n),i(Y,r),i(r,l),i(r,f),i(Y,m),i(s,I),i(s,c),Te&&Te.m(c,null),i(s,E),i(s,O),i(O,N),i(O,U),i(U,y),i(O,V),i(O,X),i(X,Z),i(O,se),i(s,me),i(s,Ie),i(Ie,we),i(Ie,Ae),i(Ae,Ee),i(Ie,Oe),ge=!0,_e||(We=[$e(M,"click",e[15]),$e(Y,"click",e[16])],_e=!0)},p(x,ve){(!ge||ve[0]&2)&&p!==(p=x[29]+"")&&ue(u,p),(!ge||ve[0]&2)&&z!==(z=x[29].sqrt().plus(x[28]).pow(2).minus(x[29])+"")&&ue(q,z),(!ge||ve[0]&2)&&T!==(T=(x[29].isGreaterThan(0)?x[29].minus(pe.max(0,x[29].sqrt().minus(x[28]).pow(2))):0)+"")&&ue(f,T),x[0].unlocks[J.FUEL_CAPTURE_AUTOMATION]?Te?(Te.p(x,ve),ve[0]&1&&Ne(Te,1)):(Te=xn(x),Te.c(),Ne(Te,1),Te.m(c,null)):Te&&(Vt(),Ue(Te,1,1,()=>{Te=null}),qt()),(!ge||ve[0]&2)&&G!==(G=x[29].times(x[6]).toFixed(2)+"")&&ue(y,G),(!ge||ve[0]&2)&&ne!==(ne=x[6].toFixed(5)+"")&&ue(Z,ne),(!ge||ve[0]&2)&&he!==(he=x[30].times(x[29]).toExponential(2)+"")&&ue(Ee,he)},i(x){ge||(Ne(Te),ge=!0)},o(x){Ue(Te),ge=!1},d(x){x&&w(t),x&&w(a),x&&w(s),Te&&Te.d(),_e=!1,jt(We)}}}function xn(e){let t,a,s,o,_,g,p=e[1].capture.automation.interval.toFixed(2)+"",u,d,v;function k(h){e[17](h)}let B={title:"Auto",name:J.FUEL_CAPTURE_AUTOMATION,options:["expand","reduce","off"]};return e[1].capture.automation.mode!==void 0&&(B.group=e[1].capture.automation.mode),t=new hs({props:B}),is.push(()=>os(t,"group",k)),{c(){gt(t.$$.fragment),s=K(),o=F("p"),_=b("(ea. "),g=F("span"),u=b(p),d=b("s)"),this.h()},l(h){vt(t.$$.fragment,h),s=j(h),o=C(h,"P",{});var A=R(o);_=P(A,"(ea. "),g=C(A,"SPAN",{class:!0});var M=R(g);u=P(M,p),M.forEach(w),d=P(A,"s)"),A.forEach(w),this.h()},h(){D(g,"class","num")},m(h,A){Et(t,h,A),fe(h,s,A),fe(h,o,A),i(o,_),i(o,g),i(g,u),i(o,d),v=!0},p(h,A){const M={};!a&&A[0]&2&&(a=!0,M.group=h[1].capture.automation.mode,as(()=>a=!1)),t.$set(M),(!v||A[0]&2)&&p!==(p=h[1].capture.automation.interval.toFixed(2)+"")&&ue(u,p)},i(h){v||(Ne(t.$$.fragment,h),v=!0)},o(h){Ue(t.$$.fragment,h),v=!1},d(h){Tt(t,h),h&&w(s),h&&w(o)}}}function es(e){let t,a,s,o,_=Yn.capital(e[23])+"",g,p,u,d=e[26].count+"",v,k,B,h,A,M,L,$,S,z,q,Q,W,Y,n,r;function l(){return e[18](e[23])}function T(){return e[19](e[23])}let f=e[0].unlocks[J[e[23]].AUTOMATION]&&ts(e),m=e[26].count>0&&ns(gn(e));return{c(){t=F("hr"),a=K(),s=F("div"),o=F("h3"),g=b(_),p=b(" Engines: "),u=F("span"),v=b(d),k=K(),B=F("div"),h=F("div"),A=F("button"),M=b("Build"),L=K(),$=F("button"),S=b("Recycle"),z=K(),q=F("div"),f&&f.c(),Q=K(),m&&m.c(),W=K(),this.h()},l(I){t=C(I,"HR",{}),a=j(I),s=C(I,"DIV",{class:!0});var c=R(s);o=C(c,"H3",{});var E=R(o);g=P(E,_),p=P(E," Engines: "),u=C(E,"SPAN",{class:!0});var O=R(u);v=P(O,d),O.forEach(w),E.forEach(w),k=j(c),B=C(c,"DIV",{class:!0});var N=R(B);h=C(N,"DIV",{class:!0});var U=R(h);A=C(U,"BUTTON",{});var G=R(A);M=P(G,"Build"),G.forEach(w),L=j(U),$=C(U,"BUTTON",{});var y=R($);S=P(y,"Recycle"),y.forEach(w),U.forEach(w),N.forEach(w),z=j(c),q=C(c,"DIV",{class:!0});var V=R(q);f&&f.l(V),V.forEach(w),Q=j(c),m&&m.l(c),W=j(c),c.forEach(w),this.h()},h(){D(u,"class","num"),D(h,"class","row gap-small"),D(B,"class","row gap-medium"),D(q,"class","row gap-medium"),D(s,"class","column gap-small")},m(I,c){fe(I,t,c),fe(I,a,c),fe(I,s,c),i(s,o),i(o,g),i(o,p),i(o,u),i(u,v),i(s,k),i(s,B),i(B,h),i(h,A),i(A,M),i(h,L),i(h,$),i($,S),i(s,z),i(s,q),f&&f.m(q,null),i(s,Q),m&&m.m(s,null),i(s,W),Y=!0,n||(r=[$e(A,"click",l),$e($,"click",T)],n=!0)},p(I,c){e=I,(!Y||c[0]&4)&&_!==(_=Yn.capital(e[23])+"")&&ue(g,_),(!Y||c[0]&6)&&d!==(d=e[26].count+"")&&ue(v,d),e[0].unlocks[J[e[23]].AUTOMATION]?f?(f.p(e,c),c[0]&5&&Ne(f,1)):(f=ts(e),f.c(),Ne(f,1),f.m(q,null)):f&&(Vt(),Ue(f,1,1,()=>{f=null}),qt()),e[26].count>0?m?m.p(gn(e),c):(m=ns(gn(e)),m.c(),m.m(s,W)):m&&(m.d(1),m=null)},i(I){Y||(Ne(f),Y=!0)},o(I){Ue(f),Y=!1},d(I){I&&w(t),I&&w(a),I&&w(s),f&&f.d(),m&&m.d(),n=!1,jt(r)}}}function ts(e){let t,a,s,o,_,g,p=e[1].engines[e[23]].automation.interval.toFixed(2)+"",u,d,v;function k(h){e[20](h,e[23])}let B={title:"Auto",name:J[e[23]].AUTOMATION,options:["build","recycle","off"]};return e[1].engines[e[23]].automation.mode!==void 0&&(B.group=e[1].engines[e[23]].automation.mode),t=new hs({props:B}),is.push(()=>os(t,"group",k)),{c(){gt(t.$$.fragment),s=K(),o=F("p"),_=b("(ea. "),g=F("span"),u=b(p),d=b("s)"),this.h()},l(h){vt(t.$$.fragment,h),s=j(h),o=C(h,"P",{});var A=R(o);_=P(A,"(ea. "),g=C(A,"SPAN",{class:!0});var M=R(g);u=P(M,p),M.forEach(w),d=P(A,"s)"),A.forEach(w),this.h()},h(){D(g,"class","num")},m(h,A){Et(t,h,A),fe(h,s,A),fe(h,o,A),i(o,_),i(o,g),i(g,u),i(o,d),v=!0},p(h,A){e=h;const M={};A[0]&4&&(M.name=J[e[23]].AUTOMATION),!a&&A[0]&6&&(a=!0,M.group=e[1].engines[e[23]].automation.mode,as(()=>a=!1)),t.$set(M),(!v||A[0]&6)&&p!==(p=e[1].engines[e[23]].automation.interval.toFixed(2)+"")&&ue(u,p)},i(h){v||(Ne(t.$$.fragment,h),v=!0)},o(h){Ue(t.$$.fragment,h),v=!1},d(h){Tt(t,h),h&&w(s),h&&w(o)}}}function ns(e){let t,a,s,o=e[26].count.times(e[26].mass).toFixed(2)+"",_,g,p,u=e[26].mass.toFixed(2)+"",d,v,k,B,h,A,M=e[26].count.times(e[26].consumption).toFixed(2)+"",L,$,S,z=e[26].consumption.toFixed(2)+"",q,Q,W,Y,n,r,l=e[26].count.times(e[26].output)+"",T,f,m,I=e[26].output+"",c,E,O,N,U,G,y,V,X,ne=e[26].throttle+"",Z,se,me,Ie,we,Ae,he=(e[27]*100).toFixed(1)+"",Ee,Oe,ge,_e,We,Te,x,ve,qe,Le,et,Fe,Re=e[26].thrust.times(e[1].fuel>0?1:0).toFixed(0)+"",Xe,Ge,ze,Qe;function ot(){e[22].call(x,e[23])}return{c(){t=F("p"),a=b("Mass: "),s=F("span"),_=b(o),g=b("kg ("),p=F("span"),d=b(u),v=b("PU)"),k=K(),B=F("p"),h=b("Fuel Consumption: "),A=F("span"),L=b(M),$=b("kg/s ("),S=F("span"),q=b(z),Q=b("PU)"),W=K(),Y=F("p"),n=b("Output: "),r=F("span"),T=b(l),f=b("J/kg ("),m=F("span"),c=b(I),E=b("PU)"),O=K(),N=F("div"),U=F("label"),G=F("span"),y=b("Engine Array Throttle:"),V=K(),X=F("span"),Z=b(ne),se=b("%"),Ie=K(),we=F("p"),Ae=F("span"),Ee=b(he),Oe=b("%"),ge=b(" Propulsion Efficiency"),_e=F("sup"),We=b("?"),Te=K(),x=F("input"),qe=K(),Le=F("p"),et=b("Thrust: "),Fe=F("span"),Xe=b(Re),Ge=b("N"),this.h()},l(te){t=C(te,"P",{});var ie=R(t);a=P(ie,"Mass: "),s=C(ie,"SPAN",{class:!0});var at=R(s);_=P(at,o),at.forEach(w),g=P(ie,"kg ("),p=C(ie,"SPAN",{class:!0});var He=R(p);d=P(He,u),He.forEach(w),v=P(ie,"PU)"),ie.forEach(w),k=j(te),B=C(te,"P",{});var Ve=R(B);h=P(Ve,"Fuel Consumption: "),A=C(Ve,"SPAN",{class:!0});var Nt=R(A);L=P(Nt,M),Nt.forEach(w),$=P(Ve,"kg/s ("),S=C(Ve,"SPAN",{class:!0});var Pt=R(S);q=P(Pt,z),Pt.forEach(w),Q=P(Ve,"PU)"),Ve.forEach(w),W=j(te),Y=C(te,"P",{});var tt=R(Y);n=P(tt,"Output: "),r=C(tt,"SPAN",{class:!0});var nt=R(r);T=P(nt,l),nt.forEach(w),f=P(tt,"J/kg ("),m=C(tt,"SPAN",{class:!0});var Rt=R(m);c=P(Rt,I),Rt.forEach(w),E=P(tt,"PU)"),tt.forEach(w),O=j(te),N=C(te,"DIV",{class:!0,style:!0});var Ze=R(N);U=C(Ze,"LABEL",{for:!0});var st=R(U);G=C(st,"SPAN",{});var Ot=R(G);y=P(Ot,"Engine Array Throttle:"),Ot.forEach(w),V=j(st),X=C(st,"SPAN",{class:!0});var It=R(X);Z=P(It,ne),se=P(It,"%"),It.forEach(w),st.forEach(w),Ie=j(Ze),we=C(Ze,"P",{class:!0});var ct=R(we);Ae=C(ct,"SPAN",{class:!0});var ft=R(Ae);Ee=P(ft,he),Oe=P(ft,"%"),ft.forEach(w),ge=P(ct," Propulsion Efficiency"),_e=C(ct,"SUP",{});var Be=R(_e);We=P(Be,"?"),Be.forEach(w),ct.forEach(w),Ze.forEach(w),Te=j(te),x=C(te,"INPUT",{type:!0,min:!0,max:!0,class:!0,id:!0}),qe=j(te),Le=C(te,"P",{});var pt=R(Le);et=P(pt,"Thrust: "),Fe=C(pt,"SPAN",{class:!0});var Xt=R(Fe);Xe=P(Xt,Re),Xt.forEach(w),Ge=P(pt,"N"),pt.forEach(w),this.h()},h(){D(s,"class","num"),D(p,"class","num"),D(A,"class","num"),D(S,"class","num"),D(r,"class","num"),D(m,"class","num"),Gt(G,"emphasis-alt",!e[0].departed),D(X,"class","num"),D(U,"for",me=e[23]+"-throttle"),D(Ae,"class","num"),D(we,"class","inspectable"),D(N,"class","row"),rs(N,"justify-content","space-between"),D(x,"type","range"),D(x,"min","0"),D(x,"max","100"),D(x,"class","slider"),D(x,"id",ve=e[23]+"-throttle"),D(Fe,"class","num")},m(te,ie){fe(te,t,ie),i(t,a),i(t,s),i(s,_),i(t,g),i(t,p),i(p,d),i(t,v),fe(te,k,ie),fe(te,B,ie),i(B,h),i(B,A),i(A,L),i(B,$),i(B,S),i(S,q),i(B,Q),fe(te,W,ie),fe(te,Y,ie),i(Y,n),i(Y,r),i(r,T),i(Y,f),i(Y,m),i(m,c),i(Y,E),fe(te,O,ie),fe(te,N,ie),i(N,U),i(U,G),i(G,y),i(U,V),i(U,X),i(X,Z),i(X,se),i(N,Ie),i(N,we),i(we,Ae),i(Ae,Ee),i(Ae,Oe),i(we,ge),i(we,_e),i(_e,We),fe(te,Te,ie),fe(te,x,ie),Bn(x,e[1].engines[e[23]].throttle),fe(te,qe,ie),fe(te,Le,ie),i(Le,et),i(Le,Fe),i(Fe,Xe),i(Le,Ge),ze||(Qe=[$e(we,"click",e[21]),$e(x,"change",ot),$e(x,"input",ot)],ze=!0)},p(te,ie){e=te,ie[0]&6&&o!==(o=e[26].count.times(e[26].mass).toFixed(2)+"")&&ue(_,o),ie[0]&6&&u!==(u=e[26].mass.toFixed(2)+"")&&ue(d,u),ie[0]&6&&M!==(M=e[26].count.times(e[26].consumption).toFixed(2)+"")&&ue(L,M),ie[0]&6&&z!==(z=e[26].consumption.toFixed(2)+"")&&ue(q,z),ie[0]&6&&l!==(l=e[26].count.times(e[26].output)+"")&&ue(T,l),ie[0]&6&&I!==(I=e[26].output+"")&&ue(c,I),ie[0]&1&&Gt(G,"emphasis-alt",!e[0].departed),ie[0]&6&&ne!==(ne=e[26].throttle+"")&&ue(Z,ne),ie[0]&4&&me!==(me=e[23]+"-throttle")&&D(U,"for",me),ie[0]&6&&he!==(he=(e[27]*100).toFixed(1)+"")&&ue(Ee,he),ie[0]&4&&ve!==(ve=e[23]+"-throttle")&&D(x,"id",ve),ie[0]&6&&Bn(x,e[1].engines[e[23]].throttle),ie[0]&6&&Re!==(Re=e[26].thrust.times(e[1].fuel>0?1:0).toFixed(0)+"")&&ue(Xe,Re)},d(te){te&&w(t),te&&w(k),te&&w(B),te&&w(W),te&&w(Y),te&&w(O),te&&w(N),te&&w(Te),te&&w(x),te&&w(qe),te&&w(Le),ze=!1,jt(Qe)}}}function ss(e){let t,a,s=e[0].unlocks[e[23]]&&es(vn(e));return{c(){s&&s.c(),t=rn()},l(o){s&&s.l(o),t=rn()},m(o,_){s&&s.m(o,_),fe(o,t,_),a=!0},p(o,_){o[0].unlocks[o[23]]?s?(s.p(vn(o),_),_[0]&5&&Ne(s,1)):(s=es(vn(o)),s.c(),Ne(s,1),s.m(t.parentNode,t)):s&&(Vt(),Ue(s,1,1,()=>{s=null}),qt())},i(o){a||(Ne(s),a=!0)},o(o){Ue(s),a=!1},d(o){s&&s.d(o),o&&w(t)}}}function Zs(e){let t,a,s,o,_,g,p,u,d=e[4].toFixed(2)+"",v,k,B,h,A,M,L=e[1].distance.toFixed(2)+"",$,S,z,q,Q,W,Y=e[1].velocity.toFixed(2)+"",n,r,l,T,f,m=e[1].velocity.times(100).div(on).toFixed(2)+"",I,c,E,O,N,U,G,y,V,X,ne,Z,se,me=e[5].toPrecision(20)+"",Ie,we,Ae,he,Ee,Oe,ge,_e,We,Te=e[5].times(e[1].velocity).toFixed(2)+"",x,ve,qe,Le,et,Fe,Re,Xe,Ge,ze=e[6].toFixed(2)+"",Qe,ot,te,ie,at,He,Ve=e[1].material.toFixed(2)+"",Nt,Pt,tt,nt,Rt,Ze,st=e[1].fuel.toFixed(2)+"",Ot,It,ct,ft,Be,pt,Xt,wt=e[3],Se=[];for(let ee=0;ee<wt.length;ee+=1)Se[ee]=Qn(jn(e,wt,ee));const ds=ee=>Ue(Se[ee],1,1,()=>{Se[ee]=null});let Ce=e[0].unlocks[J.FUEL_CAPTURE]&&Zn(En(e)),St=e[2],ke=[];for(let ee=0;ee<St.length;ee+=1)ke[ee]=ss(Kn(e,St,ee));const ms=ee=>Ue(ke[ee],1,1,()=>{ke[ee]=null});return{c(){t=F("div"),a=F("div"),s=F("div");for(let ee=0;ee<Se.length;ee+=1)Se[ee].c();o=K(),_=F("div"),g=F("p"),p=b("Time: "),u=F("span"),v=b(d),k=b("s"),B=K(),h=F("p"),A=b("Traveled: "),M=F("span"),$=b(L),S=b("m"),z=K(),q=F("p"),Q=b("Velocity: "),W=F("span"),n=b(Y),r=b(`m/s\r
        \r
        `),l=F("span"),T=b("("),f=F("span"),I=b(m),c=b("%"),E=b(" C"),O=F("sup"),N=b("?"),U=b(")"),G=K(),y=F("p"),V=b("Lorentz Factor"),X=F("sup"),ne=b("?"),Z=b(": "),se=F("span"),Ie=b(me),we=b("m/s"),Ae=K(),he=F("p"),Ee=b("Proper Velocity"),Oe=F("sup"),ge=b("?"),_e=b(": "),We=F("span"),x=b(Te),ve=b("m/s"),qe=K(),Le=F("hr"),et=K(),Fe=F("div"),Re=F("p"),Xe=b("Total Mass: "),Ge=F("span"),Qe=b(ze),ot=b("kg"),te=K(),ie=F("p"),at=b("Free Material: "),He=F("span"),Nt=b(Ve),Pt=b("kg"),tt=K(),nt=F("p"),Rt=b("Fuel: "),Ze=F("span"),Ot=b(st),It=b("kg"),ct=K(),Ce&&Ce.c(),ft=K();for(let ee=0;ee<ke.length;ee+=1)ke[ee].c();this.h()},l(ee){t=C(ee,"DIV",{class:!0});var le=R(t);a=C(le,"DIV",{class:!0});var re=R(a);s=C(re,"DIV",{class:!0});var ht=R(s);for(let kt=0;kt<Se.length;kt+=1)Se[kt].l(ht);ht.forEach(w),re.forEach(w),o=j(le),_=C(le,"DIV",{class:!0});var lt=R(_);g=C(lt,"P",{});var Qt=R(g);p=P(Qt,"Time: "),u=C(Qt,"SPAN",{class:!0});var wn=R(u);v=P(wn,d),wn.forEach(w),k=P(Qt,"s"),Qt.forEach(w),B=j(lt),h=C(lt,"P",{});var Zt=R(h);A=P(Zt,"Traveled: "),M=C(Zt,"SPAN",{class:!0});var Sn=R(M);$=P(Sn,L),Sn.forEach(w),S=P(Zt,"m"),Zt.forEach(w),z=j(lt),q=C(lt,"P",{});var Jt=R(q);Q=P(Jt,"Velocity: "),W=C(Jt,"SPAN",{class:!0});var kn=R(W);n=P(kn,Y),kn.forEach(w),r=P(Jt,`m/s\r
        \r
        `),l=C(Jt,"SPAN",{class:!0});var yt=R(l);T=P(yt,"("),f=C(yt,"SPAN",{class:!0});var an=R(f);I=P(an,m),c=P(an,"%"),an.forEach(w),E=P(yt," C"),O=C(yt,"SUP",{});var Mn=R(O);N=P(Mn,"?"),Mn.forEach(w),U=P(yt,")"),yt.forEach(w),Jt.forEach(w),G=j(lt),y=C(lt,"P",{class:!0});var $t=R(y);V=P($t,"Lorentz Factor"),X=C($t,"SUP",{});var Un=R(X);ne=P(Un,"?"),Un.forEach(w),Z=P($t,": "),se=C($t,"SPAN",{class:!0});var Fn=R(se);Ie=P(Fn,me),Fn.forEach(w),we=P($t,"m/s"),$t.forEach(w),Ae=j(lt),he=C(lt,"P",{class:!0});var Bt=R(he);Ee=P(Bt,"Proper Velocity"),Oe=C(Bt,"SUP",{});var Cn=R(Oe);ge=P(Cn,"?"),Cn.forEach(w),_e=P(Bt,": "),We=C(Bt,"SPAN",{class:!0});var bn=R(We);x=P(bn,Te),bn.forEach(w),ve=P(Bt,"m/s"),Bt.forEach(w),lt.forEach(w),qe=j(le),Le=C(le,"HR",{}),et=j(le),Fe=C(le,"DIV",{class:!0});var Dt=R(Fe);Re=C(Dt,"P",{});var xt=R(Re);Xe=P(xt,"Total Mass: "),Ge=C(xt,"SPAN",{class:!0});var Pn=R(Ge);Qe=P(Pn,ze),Pn.forEach(w),ot=P(xt,"kg"),xt.forEach(w),te=j(Dt),ie=C(Dt,"P",{});var en=R(ie);at=P(en,"Free Material: "),He=C(en,"SPAN",{class:!0});var Rn=R(He);Nt=P(Rn,Ve),Rn.forEach(w),Pt=P(en,"kg"),en.forEach(w),tt=j(Dt),nt=C(Dt,"P",{});var tn=R(nt);Rt=P(tn,"Fuel: "),Ze=C(tn,"SPAN",{class:!0});var yn=R(Ze);Ot=P(yn,st),yn.forEach(w),It=P(tn,"kg"),tn.forEach(w),Dt.forEach(w),ct=j(le),Ce&&Ce.l(le),ft=j(le);for(let kt=0;kt<ke.length;kt+=1)ke[kt].l(le);le.forEach(w),this.h()},h(){D(s,"class","messages svelte-a4vctt"),D(a,"class","messages-container svelte-a4vctt"),D(u,"class","num"),D(M,"class","num"),D(W,"class","num"),D(f,"class","num"),D(l,"class","inspectable"),D(se,"class","num"),D(y,"class","inspectable"),D(We,"class","num"),D(he,"class","inspectable"),D(_,"class","column gap-small"),D(Ge,"class","num"),D(He,"class","num"),D(Ze,"class","num"),D(Fe,"class","column gap-small"),D(t,"class","column gap-medium")},m(ee,le){fe(ee,t,le),i(t,a),i(a,s);for(let re=0;re<Se.length;re+=1)Se[re]&&Se[re].m(s,null);i(t,o),i(t,_),i(_,g),i(g,p),i(g,u),i(u,v),i(g,k),i(_,B),i(_,h),i(h,A),i(h,M),i(M,$),i(h,S),i(_,z),i(_,q),i(q,Q),i(q,W),i(W,n),i(q,r),i(q,l),i(l,T),i(l,f),i(f,I),i(f,c),i(l,E),i(l,O),i(O,N),i(l,U),i(_,G),i(_,y),i(y,V),i(y,X),i(X,ne),i(y,Z),i(y,se),i(se,Ie),i(y,we),i(_,Ae),i(_,he),i(he,Ee),i(he,Oe),i(Oe,ge),i(he,_e),i(he,We),i(We,x),i(he,ve),i(t,qe),i(t,Le),i(t,et),i(t,Fe),i(Fe,Re),i(Re,Xe),i(Re,Ge),i(Ge,Qe),i(Re,ot),i(Fe,te),i(Fe,ie),i(ie,at),i(ie,He),i(He,Nt),i(ie,Pt),i(Fe,tt),i(Fe,nt),i(nt,Rt),i(nt,Ze),i(Ze,Ot),i(nt,It),i(t,ct),Ce&&Ce.m(t,null),i(t,ft);for(let re=0;re<ke.length;re+=1)ke[re]&&ke[re].m(t,null);Be=!0,pt||(Xt=[$e(l,"click",e[12]),$e(y,"click",e[13]),$e(he,"click",e[14])],pt=!0)},p(ee,le){if(le[0]&8){wt=ee[3];let re;for(re=0;re<wt.length;re+=1){const ht=jn(ee,wt,re);Se[re]?(Se[re].p(ht,le),Ne(Se[re],1)):(Se[re]=Qn(ht),Se[re].c(),Ne(Se[re],1),Se[re].m(s,null))}for(Vt(),re=wt.length;re<Se.length;re+=1)ds(re);qt()}if((!Be||le[0]&16)&&d!==(d=ee[4].toFixed(2)+"")&&ue(v,d),(!Be||le[0]&2)&&L!==(L=ee[1].distance.toFixed(2)+"")&&ue($,L),(!Be||le[0]&2)&&Y!==(Y=ee[1].velocity.toFixed(2)+"")&&ue(n,Y),(!Be||le[0]&2)&&m!==(m=ee[1].velocity.times(100).div(on).toFixed(2)+"")&&ue(I,m),(!Be||le[0]&32)&&me!==(me=ee[5].toPrecision(20)+"")&&ue(Ie,me),(!Be||le[0]&34)&&Te!==(Te=ee[5].times(ee[1].velocity).toFixed(2)+"")&&ue(x,Te),(!Be||le[0]&64)&&ze!==(ze=ee[6].toFixed(2)+"")&&ue(Qe,ze),(!Be||le[0]&2)&&Ve!==(Ve=ee[1].material.toFixed(2)+"")&&ue(Nt,Ve),(!Be||le[0]&2)&&st!==(st=ee[1].fuel.toFixed(2)+"")&&ue(Ot,st),ee[0].unlocks[J.FUEL_CAPTURE]?Ce?(Ce.p(En(ee),le),le[0]&1&&Ne(Ce,1)):(Ce=Zn(En(ee)),Ce.c(),Ne(Ce,1),Ce.m(t,ft)):Ce&&(Vt(),Ue(Ce,1,1,()=>{Ce=null}),qt()),le[0]&2439){St=ee[2];let re;for(re=0;re<St.length;re+=1){const ht=Kn(ee,St,re);ke[re]?(ke[re].p(ht,le),Ne(ke[re],1)):(ke[re]=ss(ht),ke[re].c(),Ne(ke[re],1),ke[re].m(t,null))}for(Vt(),re=St.length;re<ke.length;re+=1)ms(re);qt()}},i(ee){if(!Be){for(let le=0;le<wt.length;le+=1)Ne(Se[le]);Ne(Ce);for(let le=0;le<St.length;le+=1)Ne(ke[le]);Be=!0}},o(ee){Se=Se.filter(Boolean);for(let le=0;le<Se.length;le+=1)Ue(Se[le]);Ue(Ce),ke=ke.filter(Boolean);for(let le=0;le<ke.length;le+=1)Ue(ke[le]);Be=!1},d(ee){ee&&w(t),Tn(Se,ee),Ce&&Ce.d(),Tn(ke,ee),pt=!1,jt(Xt)}}}function xs(e){let t,a;return t=new ps({props:{title:"Horizon",$$slots:{default:[Zs]},$$scope:{ctx:e}}}),{c(){gt(t.$$.fragment)},l(s){vt(t.$$.fragment,s)},m(s,o){Et(t,s,o),a=!0},p(s,o){const _={};o[0]&127|o[1]&8&&(_.$$scope={dirty:o,ctx:s}),t.$set(_)},i(s){a||(Ne(t.$$.fragment,s),a=!0)},o(s){Ue(t.$$.fragment,s),a=!1},d(s){Tt(t,s)}}}function el(e,t,a){let s,o,_,g;it(e,be,l=>a(0,s=l)),it(e,ce,l=>a(1,o=l)),it(e,Ht,l=>a(4,_=l)),it(e,Ut,l=>a(5,g=l));let p=[],u=De;const d=l=>{ce.tryBuild(l)||A("Not enough material.")},v=l=>{ce.tryRecycle(l)||A(`No ${l} engines to recycle.`)},k=()=>{ce.tryExpand()||A("Not enough material.")},B=()=>{ce.tryReduce()||A("Fuel capture system is fully reduced.")};de.setCompleteCallback(l=>{A(`Completed research: ${l.title}`)});let h=[];const A=l=>{console.log(l),h.push({text:l,timestamp:Date.now()}),h.length>100&&h.shift(),a(3,h)},M=()=>A("C: The speed of light, 299792458m/s."),L=()=>A("Lorentz Factor: A quantification of how much time dilates and length contracts for Horizon, based on its velocity. As it increases, so do proper velocity and the relative passage of time on Earth."),$=()=>A("Proper Velocity: The speed of Horizon as observed from Earth. It can exceed the speed of light due to length contraction."),S=()=>k(),z=()=>B();function q(l){e.$$.not_equal(o.capture.automation.mode,l)&&(o.capture.automation.mode=l,ce.set(o))}const Q=l=>d(l),W=l=>v(l);function Y(l,T){e.$$.not_equal(o.engines[T].automation.mode,l)&&(o.engines[T].automation.mode=l,ce.set(o))}const n=()=>A("Propulsion Efficiency: The portion of output energy that can be converted to propulsive force at the current throttle.");function r(l){o.engines[l].throttle=As(this.value),ce.set(o)}return e.$$.update=()=>{e.$$.dirty[0]&3&&(a(2,p=Object.values(H).filter(l=>s.unlocks[l])),a(6,u=ce.getInfo().mass))},[s,o,p,h,_,g,u,d,v,k,B,A,M,L,$,S,z,q,Q,W,Y,n,r]}class tl extends Ft{constructor(t){super(),Ct(this,t,el,xs,bt,{},null,[-1,-1])}}const nl={lorentz:mt,earthTime:De,horizonTime:De,multitaskFactor:1,progression:On,research:Nn,rocket:Je,lastUpdate:0},sl=e=>typeof e!="string"?!1:!isNaN(e)&&!isNaN(parseFloat(e)),ll=()=>{const e={lorentz:ae(Ut),earthTime:ae(Yt),horizonTime:ae(Ht),multitaskFactor:ae(Wt),progression:ae(be),research:ae(de),rocket:ae(ce),lastUpdate:ae(zt)};localStorage.setItem("data",JSON.stringify(e))},rl=()=>{try{const e=JSON.parse(localStorage.getItem("data"),(a,s)=>sl(s)?pe(s):s),t={..._t(nl),...e};console.log("LOAD:"),console.log(t),zt.set(t.lastUpdate),Ut.set(t.lorentz),Yt.set(t.earthTime),Ht.set(t.horizonTime),Wt.set(t.multitaskFactor),be.set(t.progression),de.set(t.research),ce.set(t.rocket)}catch(e){console.log(`load failed: ${e}`)}};function ls(e){let t,a,s,o;return{c(){t=F("button"),a=b("Reset")},l(_){t=C(_,"BUTTON",{});var g=R(t);a=P(g,"Reset"),g.forEach(w)},m(_,g){fe(_,t,g),i(t,a),s||(o=$e(t,"click",e[5]),s=!0)},p:Mt,d(_){_&&w(t),s=!1,o()}}}function il(e){let t,a,s,o,_,g,p,u,d,v,k,B,h,A,M,L,$=e[1]&&ls(e);return u=new Ws({}),B=new tl({}),{c(){t=F("main"),a=F("div"),s=F("button"),o=b("â°"),_=K(),$&&$.c(),g=K(),p=F("div"),gt(u.$$.fragment),v=K(),k=F("div"),gt(B.$$.fragment),this.h()},l(S){t=C(S,"MAIN",{class:!0});var z=R(t);a=C(z,"DIV",{class:!0});var q=R(a);s=C(q,"BUTTON",{class:!0});var Q=R(s);o=P(Q,"â°"),Q.forEach(w),_=j(q),$&&$.l(q),q.forEach(w),g=j(z),p=C(z,"DIV",{class:!0,style:!0});var W=R(p);vt(u.$$.fragment,W),W.forEach(w),v=j(z),k=C(z,"DIV",{class:!0,style:!0});var Y=R(k);vt(B.$$.fragment,Y),Y.forEach(w),z.forEach(w),this.h()},h(){D(s,"class","toggle svelte-mml3r0"),D(a,"class","options svelte-mml3r0"),D(p,"class","column svelte-mml3r0"),D(p,"style",d=e[0].x?"width:100%;":""),D(k,"class","column svelte-mml3r0"),D(k,"style",h=`filter: invert(1); ${e[0].x?"width:0;":""}`),D(t,"class","svelte-mml3r0")},m(S,z){fe(S,t,z),i(t,a),i(a,s),i(s,o),i(a,_),$&&$.m(a,null),i(t,g),i(t,p),Et(u,p,null),i(t,v),i(t,k),Et(B,k,null),A=!0,M||(L=[$e(window,"keydown",e[2]),$e(window,"keyup",e[3]),$e(s,"click",e[4])],M=!0)},p(S,[z]){S[1]?$?$.p(S,z):($=ls(S),$.c(),$.m(a,null)):$&&($.d(1),$=null),(!A||z&1&&d!==(d=S[0].x?"width:100%;":""))&&D(p,"style",d),(!A||z&1&&h!==(h=`filter: invert(1); ${S[0].x?"width:0;":""}`))&&D(k,"style",h)},i(S){A||(Ne(u.$$.fragment,S),Ne(B.$$.fragment,S),A=!0)},o(S){Ue(u.$$.fragment,S),Ue(B.$$.fragment,S),A=!1},d(S){S&&w(t),$&&$.d(),Tt(u),Tt(B),M=!1,jt(L)}}}function ol(e,t,a){const s={},o={},_=v=>{s[v.key.toLowerCase()]=1,a(0,o[v.key.toLowerCase()]=!o[v.key.toLowerCase()],o)},g=v=>{s[v.key.toLowerCase()]=0};let p=!1;const u=()=>{a(1,p=!p)},d=()=>{be.reset(),de.reset(),ce.reset(),Ut.set(mt),Ht.set(De),Yt.set(De),Wt.set(1),a(1,p=!1)};return Os(()=>{rl(),setInterval(ll,1e3),bs()}),[o,p,_,g,u,d]}class cl extends Ft{constructor(t){super(),Ct(this,t,ol,il,bt,{})}}export{cl as default};
